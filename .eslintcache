[{"/Users/jacklee/Project/OpenSource/autonomy/src/index.js":"1","/Users/jacklee/Project/OpenSource/autonomy/src/App.js":"2","/Users/jacklee/Project/OpenSource/autonomy/src/reportWebVitals.js":"3","/Users/jacklee/Project/OpenSource/autonomy/src/music/Iframe.js":"4","/Users/jacklee/Project/OpenSource/autonomy/src/utils/fileHelper.js":"5","/Users/jacklee/Project/OpenSource/autonomy/src/crash/index.js":"6","/Users/jacklee/Project/OpenSource/autonomy/src/setting/index.js":"7","/Users/jacklee/Project/OpenSource/autonomy/src/utils/treeHelper.js":"8","/Users/jacklee/Project/OpenSource/autonomy/src/utils/helper.js":"9","/Users/jacklee/Project/OpenSource/autonomy/src/components/FileList.js":"10","/Users/jacklee/Project/OpenSource/autonomy/src/components/FileSearch.js":"11","/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useIpcRenderer.js":"12","/Users/jacklee/Project/OpenSource/autonomy/src/music/index.js":"13","/Users/jacklee/Project/OpenSource/autonomy/src/todo/index.js":"14","/Users/jacklee/Project/OpenSource/autonomy/src/aim/index.js":"15","/Users/jacklee/Project/OpenSource/autonomy/src/utils/antdIcons.js":"16","/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useContextMenu.js":"17","/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useKeyPressed.js":"18","/Users/jacklee/Project/OpenSource/autonomy/src/note/index.jsx":"19","/Users/jacklee/Project/OpenSource/autonomy/src/aim/initial.js":"20","/Users/jacklee/Project/OpenSource/autonomy/src/todo/initial.js":"21","/Users/jacklee/Project/OpenSource/autonomy/src/components/Column.js":"22","/Users/jacklee/Project/OpenSource/autonomy/src/aim/AimList.js":"23","/Users/jacklee/Project/OpenSource/autonomy/src/aim/EditAim.js":"24","/Users/jacklee/Project/OpenSource/autonomy/src/components/Task.js":"25","/Users/jacklee/Project/OpenSource/autonomy/src/components/CKEditor/index.jsx":"26","/Users/jacklee/Project/OpenSource/autonomy/src/components/SmallRate.jsx":"27","/Users/jacklee/Project/OpenSource/autonomy/src/components/CKEditor/config.js":"28","/Users/jacklee/Project/OpenSource/autonomy/src/todo/components/AddDrawer/index.js":"29","/Users/jacklee/Project/OpenSource/autonomy/src/components/DynamicTags/index.js":"30"},{"size":1241,"mtime":1676126329149,"results":"31","hashOfConfig":"32"},{"size":15171,"mtime":1701874830153,"results":"33","hashOfConfig":"32"},{"size":362,"mtime":1607156125945,"results":"34","hashOfConfig":"32"},{"size":266,"mtime":1641665214498,"results":"35","hashOfConfig":"32"},{"size":959,"mtime":1674750896662,"results":"36","hashOfConfig":"32"},{"size":195,"mtime":1641127466648,"results":"37","hashOfConfig":"32"},{"size":6172,"mtime":1701610700381,"results":"38","hashOfConfig":"32"},{"size":7383,"mtime":1701872466362,"results":"39","hashOfConfig":"32"},{"size":1251,"mtime":1701606073964,"results":"40","hashOfConfig":"32"},{"size":6808,"mtime":1701874973179,"results":"41","hashOfConfig":"32"},{"size":2195,"mtime":1701872494307,"results":"42","hashOfConfig":"32"},{"size":453,"mtime":1618638838820,"results":"43","hashOfConfig":"32"},{"size":1586,"mtime":1674750896664,"results":"44","hashOfConfig":"32"},{"size":9678,"mtime":1701536706145,"results":"45","hashOfConfig":"32"},{"size":2849,"mtime":1674750896663,"results":"46","hashOfConfig":"32"},{"size":1098,"mtime":1676129943407,"results":"47","hashOfConfig":"32"},{"size":1130,"mtime":1701271024303,"results":"48","hashOfConfig":"32"},{"size":746,"mtime":1677166973324,"results":"49","hashOfConfig":"32"},{"size":696,"mtime":1674741346427,"results":"50","hashOfConfig":"32"},{"size":773,"mtime":1610185767507,"results":"51","hashOfConfig":"32"},{"size":1009,"mtime":1674750896664,"results":"52","hashOfConfig":"32"},{"size":1581,"mtime":1701496223879,"results":"53","hashOfConfig":"32"},{"size":3082,"mtime":1674750896662,"results":"54","hashOfConfig":"32"},{"size":7485,"mtime":1674751013479,"results":"55","hashOfConfig":"32"},{"size":2859,"mtime":1701532911275,"results":"56","hashOfConfig":"32"},{"size":1252,"mtime":1701878669919,"results":"57","hashOfConfig":"32"},{"size":425,"mtime":1701534240015,"results":"58","hashOfConfig":"32"},{"size":5244,"mtime":1702103149317,"results":"59","hashOfConfig":"32"},{"size":7275,"mtime":1701535523999,"results":"60","hashOfConfig":"32"},{"size":3428,"mtime":1701502050584,"results":"61","hashOfConfig":"32"},{"filePath":"62","messages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},"c6cm71",{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"64"},{"filePath":"68","messages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"70","messages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"72","messages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"74","messages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"80","messages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"82","messages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"86","messages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"88","messages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"64"},{"filePath":"91","messages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"64"},{"filePath":"94","messages":"95","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96","usedDeprecatedRules":"64"},{"filePath":"97","messages":"98","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"99","messages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"64"},{"filePath":"102","messages":"103","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"64"},{"filePath":"105","messages":"106","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"107","messages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"109","messages":"110","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"64"},{"filePath":"112","messages":"113","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"114","messages":"115","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"64"},{"filePath":"117","messages":"118","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"119","usedDeprecatedRules":"64"},{"filePath":"120","messages":"121","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"122","messages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"124","messages":"125","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"126","messages":"127","errorCount":0,"fatalErrorCount":0,"warningCount":40,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"128","messages":"129","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"130","messages":"131","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},"/Users/jacklee/Project/OpenSource/autonomy/src/index.js",[],["132","133"],"/Users/jacklee/Project/OpenSource/autonomy/src/App.js",["134","135"],"import { useState, useEffect } from 'react';\nimport styles from './App.less';\nimport moment from 'moment';\nimport FileSearch from './components/FileSearch';\nimport FileList from './components/FileList';\nimport Note from './note';\nimport Todo from './todo';\nimport Aim from './aim';\nimport {\n  defaultFiles,\n  initAllFiles,\n  importChildren,\n  findItemById,\n  editItemById,\n  createItemByFatherId,\n  deleteItemById,\n  getChildrenFilePath,\n  getIconByFileType,\n  deleteExtraAttr,\n  deepClone,\n  defaultKeys,\n} from './utils/treeHelper';\nimport emptyImg from '../public/empty.png';\nimport shortid from 'shortid';\nimport fileHelper from './utils/fileHelper';\nimport useIpcRenderer from './hooks/useIpcRenderer';\nimport Draggable from 'react-draggable';\nimport { getSaveLocation, getAutoSync } from './utils/helper';\nimport Music from './music';\nimport { message } from 'antd';\n// Node API\nconst { remote, ipcRenderer } = window.require('electron');\nconst { join, basename, extname, dirname } = window.require('path');\nconst Store = window.require('electron-store');\nconst isDevelop = true;\nconst fileStore = new Store({ name: isDevelop ? 'Dev Data' : 'Files Data' });\n// fileStore.set('files', defaultFiles); //重置操作 22.14.13\n\nconst savedLocation = getSaveLocation();\n\nconst defaultSiderWidth = 260;\nconst miniSiderWidth = 190;\nconst maxSiderWidth = 360;\n\n/**\n * state分析\n * - 文件列表 【】\n * - 搜索后的文件列表 key\n * - 未保存的文件列表 [id]\n * - 已经打开的文件列表 [id]\n * - 当前选中的文件\n */\nfunction App() {\n  const [files, setFiles] = useState(\n    initAllFiles(fileStore.get('files'), defaultFiles)\n  );\n  // console.log('remote.app.getPath', remote.app.getPath('userData'));\n  const [activeFileId, setActiveFileId] = useState(\n    fileStore.get('activeFileId')\n  );\n  const [openedFileIds, setOpenedFileIds] = useState([]);\n  const [unsavedFileIds, setUnsavedFileIds] = useState([]);\n  const [newFile, setNewFile] = useState(null);\n  const [siderWidth, setSiderWidth] = useState(defaultSiderWidth);\n  const [expandedKeys, setExpandedKeys] = useState(\n    fileStore.get('expandedKeys')\n  );\n\n  useEffect(() => {\n    if (fileStore) {\n      fileStore.set('expandedKeys', expandedKeys);\n    }\n  }, [expandedKeys]);\n\n  const activeFile = findItemById(files, activeFileId);\n  useEffect(() => {\n    if (activeFile && !activeFile.isLoaded) {\n      openClickedFile(activeFileId, activeFile.isLoaded, activeFile.path);\n    }\n  }, []);\n  // const openedFiles = findItemsByIds(files, openedFileIds);\n  // const unsavedFiles = findItemsByIds(files, unsavedFileIds);\n  useEffect(() => {\n    if (fileStore) {\n      fileStore.set('activeFileId', activeFileId);\n    }\n  }, [activeFileId]);\n  const saveFile2Store = (data) => {\n    const newData = deleteExtraAttr(deepClone(data));\n    fileStore.set('files', newData);\n  };\n\n  const clearUnsavedFile = (id) => {\n    const newUnsavedFileIds = unsavedFileIds.filter((fileId) => fileId !== id);\n    setUnsavedFileIds(newUnsavedFileIds);\n  };\n\n  const closeOpenedFile = (id) => {\n    const newOpenedFileIds = openedFileIds.filter((openId) => openId !== id);\n    setOpenedFileIds(newOpenedFileIds);\n    if (newOpenedFileIds.length > 0) {\n      setActiveFileId(newOpenedFileIds[newOpenedFileIds.length - 1]);\n    } else {\n      setActiveFileId('');\n    }\n  };\n\n  const saveBeforSwitchFile = (id, isLoaded, path) => {\n    if (activeFile) {\n      saveEditFile().then(() => {\n        openClickedFile(id, isLoaded, path);\n      });\n    } else {\n      openClickedFile(id, isLoaded, path);\n    }\n  };\n\n  const openClickedFile = (id, isLoaded, path) => {\n    const isExists = fileHelper.exists(path);\n    const curFile = findItemById(files, id);\n    if (!isLoaded && path) {\n      // TODO\n      if (getAutoSync()) {\n        ipcRenderer.send('download-file', {\n          key: `${curFile.title}.md`,\n          path: curFile.path,\n          id: curFile.id,\n          updatedAt: curFile.updatedAt,\n        });\n      } else {\n        if (!isExists) {\n          fileHelper.writeFile(path, '').then(() => {\n            const newFiles = editItemById(files, id, {\n              body: '',\n              isLoaded: true,\n            });\n            setFiles(newFiles);\n            if (!openedFileIds.includes(id)) {\n              setOpenedFileIds([...openedFileIds, id]);\n            }\n          });\n        } else {\n          fileHelper.readFile(path).then((val) => {\n            // console.log('readFile-222', path, val);\n            const newFiles = editItemById(files, id, {\n              body: val,\n              isLoaded: true,\n            });\n            setFiles(newFiles);\n            if (!openedFileIds.includes(id)) {\n              setOpenedFileIds([...openedFileIds, id]);\n            }\n          });\n        }\n      }\n      setActiveFileId(id);\n    } else {\n      setActiveFileId(id);\n      if (!openedFileIds.includes(id)) {\n        setOpenedFileIds([...openedFileIds, id]);\n      }\n    }\n  };\n  const deleteFile = (id, path, isLeaf = false) => {\n    //删除默认文件夹\n    if (defaultKeys.includes(id)) {\n      const newFiles = deleteItemById(files, id);\n      saveFile2Store(newFiles);\n      setFiles(newFiles);\n      closeOpenedFile(id);\n      clearUnsavedFile(id);\n      return;\n    }\n    if (isLeaf && isLeaf !== 'false') {\n      fileHelper.deleteFile(path).then(() => {\n        const newFiles = deleteItemById(files, id);\n        saveFile2Store(newFiles);\n        setFiles(newFiles);\n        closeOpenedFile(id);\n        clearUnsavedFile(id);\n      });\n    } else {\n      const curFolder = findItemById(files, id);\n      const allDeletePath = getChildrenFilePath(curFolder.children);\n      Promise.all(\n        allDeletePath.map((path) => fileHelper.deleteFile(path))\n      ).then(() => {\n        const newFiles = deleteItemById(files, id);\n        saveFile2Store(newFiles);\n        setFiles(newFiles);\n        closeOpenedFile(id);\n        clearUnsavedFile(id);\n      });\n    }\n  };\n  const createNewFile = (fatherId, type, isLeaf, nId) => {\n    const newId = nId || shortid.generate();\n    const newPath = join(\n      `${savedLocation}${type}/`,\n      `${newId}${type === 'note' ? '.md' : '.json'}`\n    );\n    const defalutBody = type === 'note' ? '##### 请输入markdown' : '';\n    const folder = isLeaf\n      ? {\n          path: newPath,\n          body: defalutBody,\n        }\n      : { children: [] };\n    const newFile = {\n      id: newId,\n      title: '',\n      key: newId,\n      type,\n      icon: getIconByFileType(type, isLeaf),\n      createAt: moment().valueOf(),\n      isLeaf,\n      isSync: false,\n      isLoaded: true,\n      updatedAt: 0,\n      ...folder,\n    };\n    const newFiles = createItemByFatherId(files, fatherId, newFile);\n    if (isLeaf) {\n      fileHelper.writeFile(newPath, defalutBody).then((res) => {\n        setNewFile(newFile);\n        setFiles(newFiles);\n        // 默认打开 openClickedFile(newId, true, newPath);\n        setActiveFileId(newId);\n        if (!openedFileIds.includes(newId)) {\n          setOpenedFileIds([...openedFileIds, newId]);\n        }\n      });\n    } else {\n      setNewFile(newFile);\n      setFiles(newFiles);\n    }\n    setExpandedKeys((keys) => [...keys, fatherId]);\n  };\n  const renameFile = (id, path, title, type, isLeaf = false) => {\n    if (isLeaf) {\n      const newPath = `${dirname(path)}/${title}${\n        type === 'note' ? '.md' : '.json'\n      }`;\n      fileHelper.renameFile(path, newPath).then(() => {\n        const newFiles = editItemById(files, id, { title, path: newPath });\n        // 默认打开 openClickedFile(newId, true, newPath);\n        setActiveFileId(id);\n        if (!openedFileIds.includes(id)) {\n          setOpenedFileIds([...openedFileIds, id]);\n        }\n        saveFile2Store(newFiles);\n        setFiles(newFiles);\n        setNewFile(null);\n      });\n    } else {\n      const newFiles = editItemById(files, id, { title });\n      saveFile2Store(newFiles);\n      setFiles(newFiles);\n      setNewFile(null);\n    }\n  };\n\n  const fileChange = (id, value, autoSave = false) => {\n    console.log('fileChange', id, value);\n    if (typeof value !== 'string') {\n      value = JSON.stringify(value);\n    }\n    if (value !== activeFile.body) {\n      const newFiles = editItemById(files, id, { body: value });\n      setFiles(newFiles);\n      if (autoSave) {\n        saveEditFile();\n      } else if (!unsavedFileIds.includes(id)) {\n        setUnsavedFileIds([...unsavedFileIds, id]);\n      }\n    }\n  };\n\n  const saveEditFile = () => {\n    if (!activeFile) return;\n    // console.log('我要开始执行save了');\n    const { path, body, title } = activeFile;\n    // if (activeFile.type === 'note') {\n    // console.log('保存文件，我执行了', path, body);\n    if (body === undefined) {\n      // message.error('保存异常：内容未定义');\n      return Promise.resolve(false);\n    }\n    return fileHelper.writeFile(path, body).then(() => {\n      setUnsavedFileIds(unsavedFileIds.filter((id) => id !== activeFileId));\n      if (getAutoSync()) {\n        ipcRenderer.send('upload-file', {\n          key: `${title}.md`,\n          path: path,\n        });\n      }\n    });\n    // }\n  };\n\n  const onImportFiles = (id, type) => {\n    remote.dialog\n      .showOpenDialog({\n        title: '选择导入MD文档',\n        filters: [{ name: 'Markdown Files', extension: ['md'] }],\n        properties: ['openFile', 'multiSelections'],\n      })\n      .then(({ filePaths }) => {\n        if (Array.isArray(filePaths)) {\n          // TODO 过滤已经添加过的文件\n          const children = filePaths.map((path) => {\n            const newId = shortid.generate();\n            return {\n              id: newId,\n              title: basename(path, extname(path)),\n              path,\n              key: newId,\n              type,\n              icon: getIconByFileType(type, true),\n              createAt: moment().valueOf(),\n              isLeaf: true,\n              isSync: false,\n              updatedAt: 0,\n            };\n          });\n          const newFiles = importChildren(files, id, children);\n          saveFile2Store(newFiles);\n          setFiles(newFiles);\n          if (children.length > 0) {\n            remote.dialog.showMessageBox({\n              type: 'info',\n              title: `导入成功`,\n              message: `成功导入了${children.length}个文件`,\n            });\n          }\n        }\n      });\n  };\n\n  const activeFileUploaded = () => {\n    const newFiles = editItemById(files, activeFileId, {\n      isSynced: true,\n      uploadedAt: moment().valueOf(),\n    });\n    setFiles(newFiles);\n    saveFile2Store(newFiles);\n  };\n\n  const activeFileDownloaded = (_, data) => {\n    // // console.log('activeFileDownloaded++++', data);\n    const curFile = findItemById(files, data.id);\n    // // console.log('activeFileDownloaded++++', curFile.path);\n    fileHelper.readFile(curFile.path).then((value) => {\n      // // console.log('readFile++++++', value);\n      let newData;\n      if (data.status === 'downloaded-success') {\n        newData = {\n          body: value,\n          isLoaded: true,\n          isSynced: true,\n          updatedAt: moment().valueOf(),\n        };\n      } else {\n        newData = {\n          body: value,\n          isLoaded: true,\n        };\n      }\n      // // console.log('activeFileDownloaded', newData);\n      const newFiles = editItemById(files, data.id, newData);\n      setFiles(newFiles);\n      saveFile2Store(newFiles);\n    });\n  };\n\n  const handleDrag = (_, ui) => {\n    const dragWidth = ui.x + defaultSiderWidth;\n    setSiderWidth(dragWidth);\n  };\n\n  useIpcRenderer({\n    'active-file-uploaded': activeFileUploaded,\n    'file-downloaded': activeFileDownloaded,\n    'save-edit-file': saveEditFile,\n  });\n  console.log('activeFileId', activeFile, files);\n  return (\n    <div className={styles.App}>\n      <div style={{ height: '100%', display: 'flex' }}>\n        <div\n          style={{\n            width: siderWidth,\n            background: '#6E6E6E',\n            color: 'white',\n            minWidth: siderWidth,\n            position: 'relative',\n          }}\n        >\n          <div className={styles.dragArea} />\n          <FileSearch\n            title=\"\"\n            onFileSearch={(val) => {\n              // console.log(val);\n            }}\n          />\n          <FileList\n            activeId={activeFileId}\n            files={deepClone(files)}\n            newFile={newFile}\n            expanded={{ expandedKeys, setExpandedKeys }}\n            // openedFiles={openedFiles}\n            onImportFiles={onImportFiles}\n            closeOpenedFile={closeOpenedFile}\n            unsavedFileIds={unsavedFileIds}\n            onFileClick={saveBeforSwitchFile}\n            createNewFile={createNewFile}\n            onFileDelete={deleteFile}\n            onFileRename={renameFile}\n          />\n          <Draggable\n            axis=\"x\"\n            bounds={{\n              left: miniSiderWidth - defaultSiderWidth,\n              right: maxSiderWidth - defaultSiderWidth,\n            }}\n            defaultPosition={{ x: 0, y: 0 }}\n            onDrag={handleDrag}\n          >\n            <div className={styles.handle} />\n          </Draggable>\n        </div>\n        <div\n          style={{ flex: 1, backgroundColor: '#fafbfc', overflow: 'hidden' }}\n        >\n          {!activeFile ? (\n            <div className={styles.empty}>\n              <div\n                style={{ width: '100%', position: 'absolute', top: 0 }}\n                className={styles.dragArea}\n              />\n              <img src={emptyImg} alt=\"没有数据\" />\n              <span className={styles.emptyWord}>空空如也</span>\n            </div>\n          ) : (\n            <>\n              <h1\n                className={styles.dragArea}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  height: 58,\n                  padding: '0 58px',\n                  fontSize: 26,\n                  fontWeight: 600,\n                  margin: 0,\n                  backgroundColor: '#fafbfc',\n                  position: 'relative',\n                }}\n              >\n                {unsavedFileIds.includes(activeFileId) && (\n                  <span className={styles.unsaveIcon} />\n                )}\n                {activeFile.title || ''}\n              </h1>\n              {activeFile.type === 'todo' ? (\n                <Todo activeFile={activeFile} onChange={fileChange} />\n              ) : activeFile.type === 'note' ? (\n                <Note activeFile={activeFile} onChange={fileChange} />\n              ) : activeFile.type === 'aim' ? (\n                <Aim activeFile={activeFile} onChange={fileChange} />\n              ) : activeFile.type === 'music' ? (\n                <Music activeFile={activeFile} onChange={fileChange} />\n              ) : (\n                <div className={styles.empty}>\n                  <h3 style={{ color: 'red' }}>\n                    {activeFile.title}, 正在开发中...\n                  </h3>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/jacklee/Project/OpenSource/autonomy/src/reportWebVitals.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/music/Iframe.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/utils/fileHelper.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/crash/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/setting/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/utils/treeHelper.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/utils/helper.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/FileList.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/FileSearch.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useIpcRenderer.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/music/index.js",["136"],"import React from 'react';\nimport { Tabs, Input } from 'antd';\nimport styles from './index.less';\n\nconst { TabPane } = Tabs;\nvar location = ''; // new Object();\n// window.parent.location.href=\"http://www.baidu.com\"\n\nconst Music = () => {\n  const onSearch = (value) => {\n    // console.log('value:', value);\n  };\n  return (\n    <div className={styles.Music}>\n      <Input.Search\n        placeholder=\"搜索歌名\"\n        onSearch={onSearch}\n        style={{ display: 'block', width: 360, margin: '0 auto 16px' }}\n      />\n      <Tabs type=\"card\">\n        <TabPane tab=\"QQ音乐\" key=\"1\">\n          <iframe\n            scrolling=\"false\"\n            frameBorder={0}\n            width=\"100%\"\n            height=\"100%\"\n            className={styles.iframe}\n            title=\"QQ音乐\"\n            src={'https://y.qq.com/?ADTAG=myqq#type=index'}\n          />\n        </TabPane>\n        <TabPane tab=\"网易云音乐\" key=\"2\">\n          <iframe\n            scrolling=\"false\"\n            frameBorder={0}\n            width=\"100%\"\n            // sandbox=\"\"\n            sandbox=\"allow-same-origin\"\n            className={styles.iframe}\n            title=\"网易云音乐\"\n            src={'https://music.163.com/'}\n          />\n        </TabPane>\n        <TabPane tab=\"酷狗音乐\" key=\"3\">\n          <iframe\n            scrolling=\"false\"\n            frameBorder={0}\n            width=\"100%\"\n            className={styles.iframe}\n            title=\"酷狗音乐\"\n            src={'https://www.kugou.com/'}\n          />\n        </TabPane>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default Music;\n","/Users/jacklee/Project/OpenSource/autonomy/src/todo/index.js",["137","138","139","140","141","142","143","144","145","146","147"],"import React, { useState, useCallback } from 'react';\nimport moment from 'moment';\nimport styles from './index.less';\nimport { IColumn, ITask, EStatus, ERate, ERepeat } from './initial';\nimport shortid from 'shortid';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport Column from '../components/Column';\nimport { Input, Rate, Form, Button, Menu } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { ITodo } from './initial';\nimport AddModal from './components/AddDrawer';\nimport useContextMenu from '../hooks/useContextMenu';\nimport { PlusCircleOutlined } from '@ant-design/icons';\n\nconst emptyString = ['undefined', 'null', ''];\n\nconst switchColumnTask = (todoData, source, destination) => {\n  // console.log('******', source.index);\n  const { columns } = todoData;\n  let task;\n  let targetColumnIndex;\n  const newColumns = columns.map((column, index) => {\n    if (column.id === source.droppableId) {\n      task = column.tasks[source.index];\n      column.tasks.splice(source.index, 1);\n    }\n    if (column.id === destination.droppableId) {\n      targetColumnIndex = index;\n    }\n    return column;\n  });\n  if ((targetColumnIndex || targetColumnIndex === 0) && task) {\n    newColumns[targetColumnIndex].tasks.splice(destination.index, 0, task);\n  }\n  // console.log('xxxnewColumns', newColumns);\n  return { ...todoData, columns: newColumns };\n};\n\nconst deleteColumnTask = (todoData, source) => ({\n  ...todoData,\n  columns: todoData?.columns?.map((column) => {\n    if (column.id === source.droppableId) {\n      column.tasks.splice(source.index, 1);\n    }\n    return {\n      ...column,\n    };\n  }),\n});\nconst getTaskText = (task = {}) => {\n  return [\n    task.content,\n    task.desc,\n    task.items.map((item) => item.title).join('-'),\n    task.tags.join('-'),\n  ].join('-');\n};\n\nconst sortTaskByRate = (columns, searchFilter) =>\n  columns.map((column) => {\n    return {\n      ...column,\n      tasks: column.tasks\n        .filter((task) =>\n          getTaskText(task).includes(searchFilter[column.id] || '')\n        )\n        .sort((a, b) => b.rate - a.rate),\n    };\n  });\n\nconst defalutColumns = [\n  {\n    id: 'column-todo',\n    name: '代办',\n    tasks: [],\n  },\n  {\n    id: 'column-inprogress',\n    name: '进行中',\n    tasks: [],\n  },\n  {\n    id: 'column-done',\n    name: '已完成',\n    tasks: [],\n  },\n];\n\nconst TodoList = React.memo((props) => {\n  const { activeFile, onChange } = props;\n  const columns =\n    activeFile?.body?.length > 0 && !emptyString.includes(activeFile.body)\n      ? typeof activeFile?.body === 'string'\n        ? JSON.parse(activeFile.body)\n        : activeFile?.body\n      : [...defalutColumns];\n  const todoData = { ...activeFile, columns };\n  // const [taskRate, setTaskRate] = useState(ERate.zero);\n  // const [inputTask, setInputTask] = useState('');\n  // const [inputTaskDesc, setInputTaskDesc] = useState('');\n  const [taskRepeat, setTaskRepeat] = useState(ERepeat.once);\n  const [open, setOpen] = useState(false);\n  const [form] = Form.useForm();\n  const [modalColumnId, setModalColumnId] = useState();\n  const [searchFilter, setSearchFilter] = useState({});\n\n  console.log('sortedColumns111', columns);\n  const clickItem = useContextMenu(\n    [\n      {\n        label: '编辑',\n        click: () => {\n          const { current } = clickItem;\n          if (current !== null) {\n            const task = JSON.parse(current.dataset.task);\n            console.log('task==', task);\n            setOpen(true);\n            setModalColumnId(current.dataset.columnid);\n            form.setFieldsValue({\n              id: task.id,\n              title: task.content,\n              desc: task.desc,\n              rate: task.rate,\n              items: task.items,\n              tags: task.tags,\n            });\n          }\n        },\n      },\n      {\n        label: '移至回收站',\n        click: () => {\n          const { current } = clickItem;\n          if (current !== null) {\n            const task = JSON.parse(current.dataset.task);\n            // console.log(\n            //   'xxx===>',\n            //   columns.map((column) => {\n            //     if (column.id === current.dataset.columnid) {\n            //       return {\n            //         ...column,\n            //         tasks: column.tasks.filter((item) => item.id !== task.id),\n            //       };\n            //     }\n            //     return column;\n            //   })\n            // );\n            handleDeleteTask(current.dataset.columnid, task.id);\n          }\n        },\n      },\n    ],\n    'context_menu_task',\n    [columns]\n  );\n\n  const handleDeleteTask = (columnId, taskId) => {\n    onChange(\n      todoData.id,\n      columns.map((column) => {\n        debugger;\n        if (column.id === columnId) {\n          return {\n            ...column,\n            tasks: column.tasks.filter((item) => item.id !== taskId),\n          };\n        }\n        return column;\n      }),\n      true\n    );\n  };\n\n  const handleDragEnd = (result) => {\n    const { source, destination } = result;\n    if (!destination) {\n      // const { id, columns } = deleteColumnTask({ ...todoData }, source);\n      // onChange(id, columns);\n      return;\n    }\n    if (\n      source.droppableId === destination.droppableId &&\n      source.index === destination.index\n    ) {\n      return;\n    }\n    const { id, columns } = switchColumnTask(todoData, source, destination);\n    onChange(id, columns, true);\n  };\n  const handleTaskEdit = (column, task) => {\n    setOpen(true);\n    setModalColumnId(column.id);\n    form.setFieldsValue({ ...task, title: task.content });\n  };\n  // const rate = (\n  //   <Rate\n  //     allowClear={false}\n  //     value={taskRate}\n  //     defaultValue={ERate.zero}\n  //     count={4}\n  //     tooltips={[\n  //       '不紧急不重要',\n  //       '不紧急很重要',\n  //       '很紧急不重要',\n  //       '很紧急很重要',\n  //     ]}\n  //     style={{ fontSize: 14, color: 'orangered' }}\n  //     onChange={setTaskRate}\n  //   />\n  // );\n  const handleAddTodo = (values) => {\n    const { id, title, desc, rate, items = [], tags = [] } = values;\n    if (!title) {\n      return;\n    }\n    const newTodo = {\n      id: id || shortid.generate(),\n      status: EStatus.todo,\n      content: title,\n      desc: desc,\n      rate: rate,\n      repeat: taskRepeat,\n      items,\n      tags,\n    };\n    onChange(\n      todoData.id,\n      columns.map((column) => {\n        if (column.id === modalColumnId) {\n          return {\n            ...column,\n            tasks: id\n              ? column.tasks.map((task) => {\n                  if (task.id === id) {\n                    return {\n                      ...task,\n                      ...newTodo,\n                    };\n                  }\n                  return task;\n                })\n              : [newTodo, ...column.tasks],\n          };\n        }\n        return column;\n      }),\n      true\n    );\n    // setInputTask('');\n    // setInputTaskDesc('');\n    // setTaskRate(ERate.zero);\n  };\n\n  const handleCheckLittleTask = (\n    columnItem,\n    taskItem,\n    little,\n    checked,\n    index\n  ) => {\n    onChange(\n      todoData.id,\n      columns.map((column) => {\n        if (column.id === columnItem.id) {\n          return {\n            ...column,\n            tasks: column.tasks.map((task) => {\n              if (task.id === taskItem.id) {\n                return {\n                  ...task,\n                  items: task.items.map((item) => {\n                    if (item.title === little.title) {\n                      return {\n                        ...item,\n                        checked,\n                      };\n                    }\n                    return item;\n                  }),\n                };\n              }\n              return task;\n            }),\n          };\n        }\n        return column;\n      }),\n      true\n    );\n  };\n  // console.log('todo==', todoData, columns);\n  const sortedColumns = sortTaskByRate(columns, searchFilter);\n  console.log('sortedColumns', sortedColumns, columns, searchFilter);\n  return (\n    <DragDropContext onDragEnd={handleDragEnd}>\n      {/* <div className={styles.title}>象限法则日程</div> */}\n      <div className={styles.Todo}>\n        <div className={styles.columns}>\n          {sortedColumns.map((column, index) => {\n            return (\n              <Column\n                key={column.id}\n                column={column}\n                onEditTask={handleTaskEdit}\n                onCheckLittleTask={handleCheckLittleTask}\n                actions={\n                  <>\n                    <Input\n                      placeholder={''}\n                      bordered={false}\n                      suffix={<SearchOutlined />}\n                      className={styles.search}\n                      onChange={(e) =>\n                        setSearchFilter({\n                          ...searchFilter,\n                          [column.id]: e.target.value,\n                        })\n                      }\n                    />\n                    <PlusCircleOutlined\n                      className={styles.add}\n                      onClick={() => {\n                        setOpen(true);\n                        setModalColumnId(column.id);\n                      }}\n                    />\n                  </>\n                }\n              />\n            );\n          })}\n        </div>\n        {open && (\n          <AddModal\n            form={form}\n            open={open}\n            closeModal={() => {\n              setOpen(false);\n            }}\n            handleAddTodo={handleAddTodo}\n          />\n        )}\n      </div>\n    </DragDropContext>\n  );\n});\n\nexport default TodoList;\n","/Users/jacklee/Project/OpenSource/autonomy/src/aim/index.js",["148","149","150","151","152","153","154"],"import React, { useState } from 'react';\n// import { useIdb } from 'react-use-idb';\nimport moment from 'moment';\nimport styles from './index.less';\nimport AimList from './AimList';\nimport { EAimType, EAimSort, initAim } from './initial';\nimport { message } from 'antd';\nimport EditAim from './EditAim';\nimport EmptyStatus from '../../public/empty.png';\n\nconst Aim = ({ activeFile, onChange }) => {\n  // const initAims = initAim(moment());\n  // const [allAims, setAllAims] = useState(initAims);\n  // const { currentId = allAims.data[0].id, editId, data = [] } = allAims;\n  // const [currentAim] = data.filter((item) => item.id === currentId);\n  // // console.log('currentAim', initAims, currentAim);\n  // const changeCurrentAim = (aim) => {\n  //   const newDatas = data.filter((item) => item.id !== currentId);\n  //   newDatas.push({ ...aim, modifyTime: moment().valueOf() });\n  //   setAllAims({ ...allAims, editId: '', data: newDatas });\n  // };\n\n  // const addBranchTimes = (index) => {\n  //   const { data } = allAims;\n  //   const newData = data.map((item) => {\n  //     if (item.id === currentId) {\n  //       item.currentTimes += 1;\n  //       if (index >= 0) {\n  //         item.branchs[index].currentTimes += 1;\n  //       }\n  //     }\n  //     return item;\n  //   });\n\n  //   setAllAims({\n  //     ...allAims,\n  //     data: newData,\n  //   });\n  // };\n  // const onEditChange = (type, id, title) => {\n  //   if (type === EAimType.start) {\n  //     setAllAims({ ...allAims, editId: id });\n  //     return;\n  //   }\n  //   const { data } = allAims;\n  //   if (type === EAimType.delete) {\n  //     const newData = data.filter((item) => item.id !== id);\n  //     setAllAims({ ...allAims, data: newData });\n  //     return;\n  //   }\n  //   if (type === EAimType.top) {\n  //     const newData = data.map((item) => {\n  //       if (item.id === id) {\n  //         item.sort =\n  //           item.sort === EAimSort.top ? EAimSort.normal : EAimSort.top;\n  //         item.modifyTime = moment().valueOf();\n  //       }\n  //       return item;\n  //     });\n  //     setAllAims({ ...allAims, editId: '', data: newData });\n  //     return;\n  //   }\n  //   if (type === EAimType.rename) {\n  //     if (!title) {\n  //       message.error('标题不能为空');\n  //       return;\n  //     }\n  //     const newData = data.map((item) => {\n  //       if (item.id === id) {\n  //         item.title = title;\n  //         item.modifyTime = moment().valueOf();\n  //       }\n  //       return item;\n  //     });\n  //     setAllAims({ ...allAims, editId: '', data: newData });\n  //   }\n  // };\n\n  return (\n    <div className={styles.Aim}>\n      <div className={styles.content}>\n        <EditAim activeFile={activeFile} onSubmit={onChange} />\n        <AimList activeFile={activeFile} addBranchTimes={onChange} />\n      </div>\n    </div>\n  );\n};\nexport default Aim;\n","/Users/jacklee/Project/OpenSource/autonomy/src/utils/antdIcons.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useContextMenu.js",["155","156"],"import { useEffect, useRef } from 'react';\nimport { getParentNode } from '../utils/helper';\n// import nodejs modules\nconst { remote } = window.require('electron');\nconst { Menu, MenuItem } = remote;\n\nconst useContextMenu = (menus, targetClass, deps = []) => {\n  const clickElement = useRef(null);\n  useEffect(() => {\n    const menu = new Menu();\n    menus.forEach((item) => {\n      menu.append(new MenuItem(item));\n    });\n    const handleContextMenu = ({ target }) => {\n      // 只有 e.target被 target 包裹时才出现\n      // const targetEle = document.querySelector(target);\n      // if (targetEle && targetEle.contains(e.target)) {\n      //if (target.classList.contains(targetClass)) {\n      const parentNode = getParentNode(target, targetClass);\n      if (parentNode) {\n        clickElement.current = parentNode;\n        menu.popup({ window: remote.getCurrentWindow() });\n      }\n    };\n    window.addEventListener('contextmenu', handleContextMenu);\n    return () => {\n      window.removeEventListener('contextmenu', handleContextMenu);\n    };\n  }, [...deps]);\n  return clickElement;\n};\n\nexport default useContextMenu;\n","/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useKeyPressed.js",["157"],"import { useState, useEffect } from 'react';\n\nconst useKeyPressed = (targetKeyCode) => {\n  const [keyPressed, setKeyPressed] = useState(false);\n  useEffect(() => {\n    const keyDownHandler = ({ keyCode }) => {\n      if (keyCode === targetKeyCode) {\n        setKeyPressed(true);\n      }\n    };\n    const keyUpHandler = ({ keyCode }) => {\n      if (keyCode === targetKeyCode) {\n        setKeyPressed(false);\n      }\n    };\n    document.addEventListener('keyup', keyUpHandler);\n    document.addEventListener('keydown', keyDownHandler);\n    return () => {\n      document.removeEventListener('keyup', keyUpHandler);\n      document.removeEventListener('keydown', keyDownHandler);\n    };\n  }, []);\n  return keyPressed;\n};\n\nexport default useKeyPressed;\n","/Users/jacklee/Project/OpenSource/autonomy/src/note/index.jsx",[],"/Users/jacklee/Project/OpenSource/autonomy/src/aim/initial.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/todo/initial.js",["158","159"],"import shortid from 'shortid';\nimport moment from 'moment';\n\nexport const ERepeat = {\n  once: 0,\n  everyday: 1,\n  weekly: 2,\n};\n\nexport const ERate = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  three: 3,\n  four: 4,\n};\n\nexport const EStatus = {\n  todo: 0,\n  doing: 1,\n  done: 2,\n};\n\nexport const ESort = {\n  top: 1,\n  normal: 2,\n};\n\nexport const newTodo = (momentFn, id) => {\n  // console.log('momentFn', momentFn, id);\n  const curTime = momentFn.valueOf();\n  return {\n    id,\n    title: momentFn.format('YYYYMMDD'),\n    createTime: curTime,\n    modifyTime: curTime,\n    sort: ESort.normal,\n    columns: [\n      {\n        id: 'column-todo',\n        name: '代办',\n        tasks: [],\n      },\n      {\n        id: 'column-inprogress',\n        name: '进行中',\n        tasks: [],\n      },\n      {\n        id: 'column-done',\n        name: '已完成',\n        tasks: [],\n      },\n    ],\n  };\n};\n\nexport const initTodo = (newTodo, newId) => {\n  return {\n    currentId: newId,\n    editId: '',\n    data: [newTodo],\n  };\n};\n","/Users/jacklee/Project/OpenSource/autonomy/src/components/Column.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/aim/AimList.js",["160"],"import React from 'react';\nimport { Card, Progress } from 'antd';\nimport { LikeOutlined } from '@ant-design/icons';\n\nimport styles from './index.less';\n\nconst AimList = (props) => {\n  const { activeFile, addBranchTimes } = props || {};\n  const data =\n    typeof activeFile?.body === 'string' && activeFile?.body.length > 0\n      ? JSON.parse(activeFile.body)\n      : { branchs: [] };\n\n  const { title, desc, branchs = [], times = 0, currentTimes = 0 } = data;\n  // console.log('aimlist', data, branchs);\n\n  const handleTimesChagne = (index) => {\n    const newBranchs = [...branchs];\n    let dataCurrentTimes = data?.currentTimes;\n    if (index >= 0) {\n      if ((newBranchs[index]?.currentTimes || 0) < newBranchs[index]?.times) {\n        newBranchs[index].currentTimes += 1;\n        dataCurrentTimes = (data.currentTimes || 0) + 1;\n      }\n    } else {\n      if ((data?.currentTimes || 0) < data?.times) {\n        dataCurrentTimes = (data.currentTimes || 0) + 1;\n      }\n    }\n    addBranchTimes(activeFile.id, {\n      ...data,\n      currentTimes: dataCurrentTimes,\n      branchs: newBranchs,\n    });\n  };\n\n  return (\n    <div className={styles.AimList}>\n      <Card\n        style={{ background: '#e6f7ff' }}\n        actions={\n          branchs.length < 1\n            ? [\n                <span onClick={() => handleTimesChagne(-1)}>\n                  <LikeOutlined key=\"times\" style={{ marginRight: 4 }} />\n                  {currentTimes}\n                </span>,\n              ]\n            : [\n                <Progress\n                  style={{ width: '90%', margin: '0 18px' }}\n                  percent={Math.floor((currentTimes / times) * 100)}\n                />,\n              ]\n        }\n      >\n        <div className={styles.item}>\n          <Progress\n            percent={Math.floor((currentTimes / times) * 100)}\n            width={60}\n            type=\"circle\"\n            format={() => '总'}\n          />\n          <div className={styles.titleDes}>\n            <div className={styles.title}>{activeFile.title}</div>\n            <div className={styles.desc}>{desc}</div>\n          </div>\n        </div>\n      </Card>\n      {branchs.map((branch, index) => {\n        if (!branch) return null;\n        return (\n          <Card\n            style={{ marginTop: 12 }}\n            key={branch.id}\n            actions={[\n              <span onClick={() => handleTimesChagne(index)}>\n                <LikeOutlined key=\"times\" style={{ marginRight: 4 }} />\n                {branch.currentTimes}\n              </span>,\n            ]}\n          >\n            <div className={styles.item}>\n              <Progress\n                percent={Math.floor((branch.currentTimes / branch.times) * 100)}\n                width={60}\n                type=\"circle\"\n              />\n              <div className={styles.titleDes}>\n                <div className={styles.branchTitle}>{branch.name}</div>\n                <div className={styles.desc}>{branch.desc}</div>\n              </div>\n            </div>\n          </Card>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default AimList;\n","/Users/jacklee/Project/OpenSource/autonomy/src/aim/EditAim.js",["161","162","163","164"],"import React, { useState, useEffect, ChangeEvent } from 'react';\nimport { Input, Button, Select, DatePicker, InputNumber } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport styles from './index.less';\nimport shortid from 'shortid';\nimport { EAimType } from './initial';\n\nconst EditAim = (props) => {\n  const { activeFile, onSubmit } = props || {};\n  const data =\n    typeof activeFile?.body === 'string' && activeFile?.body.length > 0\n      ? JSON.parse(activeFile.body)\n      : { branchs: [] };\n  const [isEditing, setIsEditing] = useState(false);\n  // const [title, setTitle] = useState(activeFile.title || '');\n  const [desc, setDesc] = useState(data.desc || '');\n  const [times, setTimes] = useState(data.times || 0);\n  const [startDate, setStartDate] = useState(\n    data.startDate || moment().format('YYYYMMDD')\n  );\n  const [branchs, setBranchs] = useState(\n    data.branchs || [{ id: shortid.generate(), name: '' }]\n  );\n  useEffect(() => {\n    setDesc(data.desc || '');\n    setTimes(data.times || 0);\n    setStartDate(data.startDate || moment().format('YYYYMMDD'));\n    setBranchs(data.branchs || []);\n  }, [activeFile.id, activeFile.isLoaded]);\n\n  const handleAddBranch = () => {\n    branchs?.push({\n      id: shortid.generate(),\n      name: '',\n      desc: '',\n      times: 0,\n      currentTimes: 0,\n    });\n    setBranchs([...branchs]);\n    if (branchs.length === 1) {\n      setTimes(0);\n    }\n  };\n\n  const handleSubmit = () => {\n    onSubmit(activeFile.id, {\n      ...data,\n      desc,\n      times,\n      startDate,\n      branchs,\n    });\n    setIsEditing(false);\n  };\n  const handleBranchChange = (key, e, index) => {\n    let newBranchs = [...branchs];\n    newBranchs[index][key] = e.target.value;\n    setBranchs(newBranchs);\n  };\n  const setBranchTimes = (num, index) => {\n    let newBranchs = [...branchs];\n    // console.log(\n    //   'xxxtimes',\n    //   times,\n    //   newBranchs[index],\n    //   newBranchs[index].times,\n    //   num,\n    //   times - newBranchs[index].times + num\n    // );\n    setTimes(times - (newBranchs[index].times || 0) + num);\n    newBranchs[index].times = num;\n    setBranchs(newBranchs);\n  };\n  // console.log(\n  //   'editAim',\n  //   activeFile,\n  //   data,\n  //   startDate,\n  //   data.startDate || moment().format('YYYYMMDD')\n  // );\n  // const isEditing = data.id === editId;\n  return (\n    <div className={styles.EditAim}>\n      <div className={styles.formItem}>\n        <span className={styles.label}>目标名称：</span>\n        {/* {isEditing ? (\n          <Input\n            onChange={(e) => setTitle(e.target.value)}\n            value={title}\n            style={{ width: '60%' }}\n            placeholder=\"请输入目标名称\"\n          />\n        ) : ( */}\n        <div className={styles.aimTitle}>\n          <span>{activeFile.title}</span>\n          <Button\n            disabled={isEditing}\n            type=\"text\"\n            onClick={() => setIsEditing(true)}\n          >\n            编辑\n          </Button>\n        </div>\n        {/* )} */}\n      </div>\n      {(isEditing || desc?.length > 0) && (\n        <div className={styles.formItem}>\n          <span className={styles.label}>描述：</span>\n          {isEditing ? (\n            <Input.TextArea\n              rows={2}\n              onChange={(e) => setDesc(e.target.value)}\n              value={desc}\n              style={{ width: '60%' }}\n              placeholder=\"请输入目标描述\"\n            />\n          ) : (\n            <div style={{ width: '60%', wordWrap: 'break-word' }}>{desc}</div>\n          )}\n        </div>\n      )}\n\n      {branchs?.map((branch, index) => {\n        if (!branch) return null;\n        if (!isEditing && !branch.name) return null;\n        return (\n          <div key={branch.id}>\n            <div className={styles.formItem}>\n              <span className={styles.label}>分支{index + 1}：</span>\n              {isEditing ? (\n                <div className={styles.branchTitle}>\n                  <Input\n                    value={branch.name}\n                    onChange={(e) => handleBranchChange('name', e, index)}\n                    placeholder=\"请输入分支名\"\n                  />\n                  <div className={styles.branchTimes}>\n                    <InputNumber\n                      placeholder=\"打卡次数\"\n                      style={{ flex: 1, margin: '0 6px' }}\n                      min={0}\n                      value={branch.times}\n                      onChange={(val) => setBranchTimes(Number(val), index)}\n                    />\n                    次打卡\n                  </div>\n                </div>\n              ) : (\n                <div className={styles.branchTitle}>\n                  {branch.name}\n                  <span>{branch.times}次打卡</span>\n                </div>\n              )}\n            </div>\n            {(isEditing || branch?.desc?.length > 0) && (\n              <div className={styles.formItem}>\n                <span className={styles.label}></span>\n                {isEditing ? (\n                  <Input.TextArea\n                    value={branch.desc}\n                    onChange={(e) => handleBranchChange('desc', e, index)}\n                    rows={2}\n                    style={{ width: '60%' }}\n                    placeholder=\"请输入分支描述\"\n                  />\n                ) : (\n                  <div style={{ width: '60%' }}>{branch.desc}</div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n      {isEditing && (\n        <div className={styles.formItem}>\n          <span className={styles.label}></span>\n          <Button\n            type=\"dashed\"\n            style={{ width: '60%' }}\n            onClick={handleAddBranch}\n          >\n            <PlusOutlined /> 添加分支\n          </Button>\n        </div>\n      )}\n\n      <div className={styles.formItem}>\n        <span className={styles.label}>开始时间：</span>\n        <div className={styles.dateTimes} style={{ width: '60%' }}>\n          <div style={{ flex: 1 }}>\n            {isEditing ? (\n              <DatePicker\n                value={moment(startDate)}\n                onChange={(date) =>\n                  setStartDate(moment(date).format('YYYYMMDD'))\n                }\n                placeholder=\"开始时间\"\n                style={{ width: 280 }}\n              />\n            ) : (\n              <div>{startDate}</div>\n            )}\n          </div>\n          <div className={styles.times}>\n            <span className={styles.label}>总投入：</span>\n            {isEditing ? (\n              <InputNumber\n                disabled={branchs?.length > 0}\n                style={{ flex: 1, marginRight: 4 }}\n                min={0}\n                value={times}\n                onChange={(val) => setTimes(Number(val))}\n              />\n            ) : (\n              <span style={{ color: 'red', marginRight: 4 }}>{times}</span>\n            )}\n            次打卡\n          </div>\n        </div>\n      </div>\n      {isEditing && (\n        <div className={styles.formItem}>\n          <span className={styles.label}></span>\n          <div style={{ width: '60%', textAlign: 'left' }}>\n            <Button\n              type=\"primary\"\n              style={{ width: 180 }}\n              onClick={handleSubmit}\n            >\n              保存\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EditAim;\n","/Users/jacklee/Project/OpenSource/autonomy/src/components/Task.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/CKEditor/index.jsx",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SmallRate.jsx",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/CKEditor/config.js",["165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204"],"/Users/jacklee/Project/OpenSource/autonomy/src/todo/components/AddDrawer/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/DynamicTags/index.js",[],{"ruleId":"205","replacedBy":"206"},{"ruleId":"207","replacedBy":"208"},{"ruleId":"209","severity":1,"message":"210","line":30,"column":10,"nodeType":"211","messageId":"212","endLine":30,"endColumn":17},{"ruleId":"213","severity":1,"message":"214","line":80,"column":6,"nodeType":"215","endLine":80,"endColumn":8,"suggestions":"216"},{"ruleId":"209","severity":1,"message":"217","line":6,"column":5,"nodeType":"211","messageId":"212","endLine":6,"endColumn":13},{"ruleId":"209","severity":1,"message":"218","line":1,"column":27,"nodeType":"211","messageId":"212","endLine":1,"endColumn":38},{"ruleId":"209","severity":1,"message":"219","line":2,"column":8,"nodeType":"211","messageId":"212","endLine":2,"endColumn":14},{"ruleId":"209","severity":1,"message":"220","line":4,"column":10,"nodeType":"211","messageId":"212","endLine":4,"endColumn":17},{"ruleId":"209","severity":1,"message":"221","line":4,"column":19,"nodeType":"211","messageId":"212","endLine":4,"endColumn":24},{"ruleId":"209","severity":1,"message":"222","line":4,"column":35,"nodeType":"211","messageId":"212","endLine":4,"endColumn":40},{"ruleId":"209","severity":1,"message":"223","line":8,"column":17,"nodeType":"211","messageId":"212","endLine":8,"endColumn":21},{"ruleId":"209","severity":1,"message":"224","line":8,"column":29,"nodeType":"211","messageId":"212","endLine":8,"endColumn":35},{"ruleId":"209","severity":1,"message":"225","line":8,"column":37,"nodeType":"211","messageId":"212","endLine":8,"endColumn":41},{"ruleId":"209","severity":1,"message":"226","line":10,"column":10,"nodeType":"211","messageId":"212","endLine":10,"endColumn":15},{"ruleId":"209","severity":1,"message":"227","line":39,"column":7,"nodeType":"211","messageId":"212","endLine":39,"endColumn":23},{"ruleId":"209","severity":1,"message":"228","line":101,"column":22,"nodeType":"211","messageId":"212","endLine":101,"endColumn":35},{"ruleId":"209","severity":1,"message":"229","line":1,"column":17,"nodeType":"211","messageId":"212","endLine":1,"endColumn":25},{"ruleId":"209","severity":1,"message":"219","line":3,"column":8,"nodeType":"211","messageId":"212","endLine":3,"endColumn":14},{"ruleId":"209","severity":1,"message":"230","line":6,"column":10,"nodeType":"211","messageId":"212","endLine":6,"endColumn":18},{"ruleId":"209","severity":1,"message":"231","line":6,"column":20,"nodeType":"211","messageId":"212","endLine":6,"endColumn":28},{"ruleId":"209","severity":1,"message":"232","line":6,"column":30,"nodeType":"211","messageId":"212","endLine":6,"endColumn":37},{"ruleId":"209","severity":1,"message":"210","line":7,"column":10,"nodeType":"211","messageId":"212","endLine":7,"endColumn":17},{"ruleId":"209","severity":1,"message":"233","line":9,"column":8,"nodeType":"211","messageId":"212","endLine":9,"endColumn":19},{"ruleId":"213","severity":1,"message":"234","line":29,"column":6,"nodeType":"215","endLine":29,"endColumn":15,"suggestions":"235"},{"ruleId":"213","severity":1,"message":"236","line":29,"column":7,"nodeType":"237","endLine":29,"endColumn":14},{"ruleId":"213","severity":1,"message":"238","line":22,"column":6,"nodeType":"215","endLine":22,"endColumn":8,"suggestions":"239"},{"ruleId":"209","severity":1,"message":"240","line":1,"column":8,"nodeType":"211","messageId":"212","endLine":1,"endColumn":15},{"ruleId":"209","severity":1,"message":"219","line":2,"column":8,"nodeType":"211","messageId":"212","endLine":2,"endColumn":14},{"ruleId":"209","severity":1,"message":"241","line":14,"column":11,"nodeType":"211","messageId":"212","endLine":14,"endColumn":16},{"ruleId":"209","severity":1,"message":"242","line":1,"column":38,"nodeType":"211","messageId":"212","endLine":1,"endColumn":49},{"ruleId":"209","severity":1,"message":"243","line":2,"column":25,"nodeType":"211","messageId":"212","endLine":2,"endColumn":31},{"ruleId":"209","severity":1,"message":"230","line":7,"column":10,"nodeType":"211","messageId":"212","endLine":7,"endColumn":18},{"ruleId":"213","severity":1,"message":"244","line":30,"column":6,"nodeType":"215","endLine":30,"endColumn":42,"suggestions":"245"},{"ruleId":"209","severity":1,"message":"246","line":7,"column":8,"nodeType":"211","messageId":"212","endLine":7,"endColumn":18},{"ruleId":"209","severity":1,"message":"247","line":8,"column":8,"nodeType":"211","messageId":"212","endLine":8,"endColumn":17},{"ruleId":"209","severity":1,"message":"248","line":9,"column":8,"nodeType":"211","messageId":"212","endLine":9,"endColumn":16},{"ruleId":"209","severity":1,"message":"249","line":10,"column":8,"nodeType":"211","messageId":"212","endLine":10,"endColumn":27},{"ruleId":"209","severity":1,"message":"250","line":11,"column":8,"nodeType":"211","messageId":"212","endLine":11,"endColumn":18},{"ruleId":"209","severity":1,"message":"251","line":12,"column":8,"nodeType":"211","messageId":"212","endLine":12,"endColumn":12},{"ruleId":"209","severity":1,"message":"252","line":13,"column":8,"nodeType":"211","messageId":"212","endLine":13,"endColumn":12},{"ruleId":"209","severity":1,"message":"253","line":14,"column":8,"nodeType":"211","messageId":"212","endLine":14,"endColumn":17},{"ruleId":"209","severity":1,"message":"254","line":15,"column":8,"nodeType":"211","messageId":"212","endLine":15,"endColumn":18},{"ruleId":"209","severity":1,"message":"255","line":16,"column":8,"nodeType":"211","messageId":"212","endLine":16,"endColumn":27},{"ruleId":"209","severity":1,"message":"256","line":17,"column":8,"nodeType":"211","messageId":"212","endLine":17,"endColumn":17},{"ruleId":"209","severity":1,"message":"257","line":18,"column":8,"nodeType":"211","messageId":"212","endLine":18,"endColumn":18},{"ruleId":"209","severity":1,"message":"258","line":19,"column":8,"nodeType":"211","messageId":"212","endLine":19,"endColumn":16},{"ruleId":"209","severity":1,"message":"259","line":21,"column":8,"nodeType":"211","messageId":"212","endLine":21,"endColumn":17},{"ruleId":"209","severity":1,"message":"260","line":22,"column":8,"nodeType":"211","messageId":"212","endLine":22,"endColumn":22},{"ruleId":"209","severity":1,"message":"261","line":23,"column":8,"nodeType":"211","messageId":"212","endLine":23,"endColumn":17},{"ruleId":"209","severity":1,"message":"262","line":24,"column":8,"nodeType":"211","messageId":"212","endLine":24,"endColumn":13},{"ruleId":"209","severity":1,"message":"263","line":25,"column":8,"nodeType":"211","messageId":"212","endLine":25,"endColumn":20},{"ruleId":"209","severity":1,"message":"264","line":26,"column":8,"nodeType":"211","messageId":"212","endLine":26,"endColumn":19},{"ruleId":"209","severity":1,"message":"265","line":27,"column":8,"nodeType":"211","messageId":"212","endLine":27,"endColumn":18},{"ruleId":"209","severity":1,"message":"266","line":28,"column":8,"nodeType":"211","messageId":"212","endLine":28,"endColumn":20},{"ruleId":"209","severity":1,"message":"267","line":29,"column":8,"nodeType":"211","messageId":"212","endLine":29,"endColumn":19},{"ruleId":"209","severity":1,"message":"268","line":30,"column":8,"nodeType":"211","messageId":"212","endLine":30,"endColumn":14},{"ruleId":"209","severity":1,"message":"269","line":31,"column":8,"nodeType":"211","messageId":"212","endLine":31,"endColumn":19},{"ruleId":"209","severity":1,"message":"270","line":32,"column":8,"nodeType":"211","messageId":"212","endLine":32,"endColumn":14},{"ruleId":"209","severity":1,"message":"271","line":33,"column":8,"nodeType":"211","messageId":"212","endLine":33,"endColumn":12},{"ruleId":"209","severity":1,"message":"272","line":34,"column":8,"nodeType":"211","messageId":"212","endLine":34,"endColumn":12},{"ruleId":"209","severity":1,"message":"273","line":35,"column":8,"nodeType":"211","messageId":"212","endLine":35,"endColumn":22},{"ruleId":"209","severity":1,"message":"274","line":36,"column":8,"nodeType":"211","messageId":"212","endLine":36,"endColumn":16},{"ruleId":"209","severity":1,"message":"275","line":37,"column":8,"nodeType":"211","messageId":"212","endLine":37,"endColumn":18},{"ruleId":"209","severity":1,"message":"276","line":38,"column":8,"nodeType":"211","messageId":"212","endLine":38,"endColumn":17},{"ruleId":"209","severity":1,"message":"277","line":39,"column":8,"nodeType":"211","messageId":"212","endLine":39,"endColumn":23},{"ruleId":"209","severity":1,"message":"278","line":40,"column":8,"nodeType":"211","messageId":"212","endLine":40,"endColumn":21},{"ruleId":"209","severity":1,"message":"279","line":41,"column":8,"nodeType":"211","messageId":"212","endLine":41,"endColumn":13},{"ruleId":"209","severity":1,"message":"280","line":42,"column":8,"nodeType":"211","messageId":"212","endLine":42,"endColumn":27},{"ruleId":"209","severity":1,"message":"281","line":43,"column":8,"nodeType":"211","messageId":"212","endLine":43,"endColumn":23},{"ruleId":"209","severity":1,"message":"282","line":44,"column":8,"nodeType":"211","messageId":"212","endLine":44,"endColumn":20},{"ruleId":"209","severity":1,"message":"283","line":45,"column":8,"nodeType":"211","messageId":"212","endLine":45,"endColumn":26},{"ruleId":"209","severity":1,"message":"284","line":46,"column":8,"nodeType":"211","messageId":"212","endLine":46,"endColumn":16},{"ruleId":"209","severity":1,"message":"285","line":47,"column":8,"nodeType":"211","messageId":"212","endLine":47,"endColumn":17},"no-native-reassign",["286"],"no-negated-in-lhs",["287"],"no-unused-vars","'message' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'activeFile', 'activeFileId', and 'openClickedFile'. Either include them or remove the dependency array.","ArrayExpression",["288"],"'location' is assigned a value but never used.","'useCallback' is defined but never used.","'moment' is defined but never used.","'IColumn' is defined but never used.","'ITask' is defined but never used.","'ERate' is defined but never used.","'Rate' is defined but never used.","'Button' is defined but never used.","'Menu' is defined but never used.","'ITodo' is defined but never used.","'deleteColumnTask' is assigned a value but never used.","'setTaskRepeat' is assigned a value but never used.","'useState' is defined but never used.","'EAimType' is defined but never used.","'EAimSort' is defined but never used.","'initAim' is defined but never used.","'EmptyStatus' is defined but never used.","React Hook useEffect has missing dependencies: 'menus' and 'targetClass'. Either include them or remove the dependency array.",["289"],"React Hook useEffect has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","SpreadElement","React Hook useEffect has a missing dependency: 'targetKeyCode'. Either include it or remove the dependency array.",["290"],"'shortid' is defined but never used.","'title' is assigned a value but never used.","'ChangeEvent' is defined but never used.","'Select' is defined but never used.","React Hook useEffect has missing dependencies: 'data.branchs', 'data.desc', 'data.startDate', and 'data.times'. Either include them or remove the dependency array.",["291"],"'Autoformat' is defined but never used.","'AutoImage' is defined but never used.","'AutoLink' is defined but never used.","'Base64UploadAdapter' is defined but never used.","'BlockQuote' is defined but never used.","'Bold' is defined but never used.","'Code' is defined but never used.","'CodeBlock' is defined but never used.","'Essentials' is defined but never used.","'FontBackgroundColor' is defined but never used.","'FontColor' is defined but never used.","'FontFamily' is defined but never used.","'FontSize' is defined but never used.","'Highlight' is defined but never used.","'HorizontalLine' is defined but never used.","'HtmlEmbed' is defined but never used.","'Image' is defined but never used.","'ImageCaption' is defined but never used.","'ImageResize' is defined but never used.","'ImageStyle' is defined but never used.","'ImageToolbar' is defined but never used.","'ImageUpload' is defined but never used.","'Indent' is defined but never used.","'IndentBlock' is defined but never used.","'Italic' is defined but never used.","'Link' is defined but never used.","'List' is defined but never used.","'ListProperties' is defined but never used.","'Markdown' is defined but never used.","'MediaEmbed' is defined but never used.","'Paragraph' is defined but never used.","'PasteFromOffice' is defined but never used.","'Strikethrough' is defined but never used.","'Table' is defined but never used.","'TableCellProperties' is defined but never used.","'TableProperties' is defined but never used.","'TableToolbar' is defined but never used.","'TextTransformation' is defined but never used.","'TodoList' is defined but never used.","'Underline' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"292","fix":"293"},{"desc":"294","fix":"295"},{"desc":"296","fix":"297"},{"desc":"298","fix":"299"},"Update the dependencies array to be: [activeFile, activeFileId, openClickedFile]",{"range":"300","text":"301"},"Update the dependencies array to be: [menus, targetClass]",{"range":"302","text":"303"},"Update the dependencies array to be: [targetKeyCode]",{"range":"304","text":"305"},"Update the dependencies array to be: [activeFile.id, activeFile.isLoaded, data.branchs, data.desc, data.startDate, data.times]",{"range":"306","text":"307"},[2385,2387],"[activeFile, activeFileId, openClickedFile]",[1042,1051],"[menus, targetClass]",[686,688],"[targetKeyCode]",[1165,1201],"[activeFile.id, activeFile.isLoaded, data.branchs, data.desc, data.startDate, data.times]"]