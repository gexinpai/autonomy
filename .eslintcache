[{"/Users/jacklee/Project/OpenSource/autonomy/src/index.js":"1","/Users/jacklee/Project/OpenSource/autonomy/src/reportWebVitals.js":"2","/Users/jacklee/Project/OpenSource/autonomy/src/App.js":"3","/Users/jacklee/Project/OpenSource/autonomy/src/utils/fileHelper.js":"4","/Users/jacklee/Project/OpenSource/autonomy/src/music/Iframe.js":"5","/Users/jacklee/Project/OpenSource/autonomy/src/utils/helper.js":"6","/Users/jacklee/Project/OpenSource/autonomy/src/book/index.jsx":"7","/Users/jacklee/Project/OpenSource/autonomy/src/utils/pdf.js":"8","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/constant.js":"9","/Users/jacklee/Project/OpenSource/autonomy/src/setting/index.js":"10","/Users/jacklee/Project/OpenSource/autonomy/src/crash/index.js":"11","/Users/jacklee/Project/OpenSource/autonomy/src/utils/treeHelper.js":"12","/Users/jacklee/Project/OpenSource/autonomy/src/components/FileSearch.js":"13","/Users/jacklee/Project/OpenSource/autonomy/src/components/FileList.js":"14","/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useIpcRenderer.js":"15","/Users/jacklee/Project/OpenSource/autonomy/src/book/utils.js":"16","/Users/jacklee/Project/OpenSource/autonomy/src/music/index.js":"17","/Users/jacklee/Project/OpenSource/autonomy/src/aim/index.js":"18","/Users/jacklee/Project/OpenSource/autonomy/src/todo/index.js":"19","/Users/jacklee/Project/OpenSource/autonomy/src/utils/antdIcons.js":"20","/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useKeyPressed.js":"21","/Users/jacklee/Project/OpenSource/autonomy/src/todo/components/Report/index.js":"22","/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useContextMenu.js":"23","/Users/jacklee/Project/OpenSource/autonomy/src/note/index.jsx":"24","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/index.js":"25","/Users/jacklee/Project/OpenSource/autonomy/src/aim/initial.js":"26","/Users/jacklee/Project/OpenSource/autonomy/src/todo/initial.js":"27","/Users/jacklee/Project/OpenSource/autonomy/src/aim/EditAim.js":"28","/Users/jacklee/Project/OpenSource/autonomy/src/components/Column.js":"29","/Users/jacklee/Project/OpenSource/autonomy/src/aim/AimList.js":"30","/Users/jacklee/Project/OpenSource/autonomy/src/todo/components/AddDrawer/index.js":"31","/Users/jacklee/Project/OpenSource/autonomy/src/components/Task.js":"32","/Users/jacklee/Project/OpenSource/autonomy/src/components/SmallRate.jsx":"33","/Users/jacklee/Project/OpenSource/autonomy/src/components/DynamicTags/index.js":"34","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/InsertImage.js":"35","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Button.js":"36","/Users/jacklee/Project/OpenSource/autonomy/src/components/Icon.js":"37","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Toolbar.js":"38","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/utils.js":"39","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/images.js":"40","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/shortcuts.js":"41","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/ColorPicker/index.js":"42","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Menu.js":"43","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/index.jsx":"44","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/CheckList.js":"45","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/hooks/useDecorate.js":"46","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/index.jsx":"47","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/SetNodeToDecorations.js":"48","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/components/BlockCodeButton.jsx":"49","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Icon.js":"50","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/utils/normalize-tokens.js":"51","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/components/LanguageSelect.jsx":"52","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/highlight.js":"53"},{"size":1333,"mtime":1720963540281,"results":"54","hashOfConfig":"55"},{"size":362,"mtime":1607156125945,"results":"56","hashOfConfig":"55"},{"size":20230,"mtime":1722761023509,"results":"57","hashOfConfig":"55"},{"size":3193,"mtime":1722761589126,"results":"58","hashOfConfig":"55"},{"size":266,"mtime":1641665214498,"results":"59","hashOfConfig":"55"},{"size":1268,"mtime":1704474901083,"results":"60","hashOfConfig":"55"},{"size":2480,"mtime":1722759453287,"results":"61","hashOfConfig":"55"},{"size":9876,"mtime":1707279480497,"results":"62","hashOfConfig":"55"},{"size":758,"mtime":1722720796977,"results":"63","hashOfConfig":"55"},{"size":6211,"mtime":1704476452464,"results":"64","hashOfConfig":"55"},{"size":195,"mtime":1641127466648,"results":"65","hashOfConfig":"55"},{"size":7651,"mtime":1721547994282,"results":"66","hashOfConfig":"55"},{"size":2195,"mtime":1701872494307,"results":"67","hashOfConfig":"55"},{"size":7756,"mtime":1722760841542,"results":"68","hashOfConfig":"55"},{"size":453,"mtime":1618638838820,"results":"69","hashOfConfig":"55"},{"size":5332,"mtime":1707310518732,"results":"70","hashOfConfig":"55"},{"size":816,"mtime":1717035513036,"results":"71","hashOfConfig":"55"},{"size":2849,"mtime":1674750896663,"results":"72","hashOfConfig":"55"},{"size":10147,"mtime":1720956248312,"results":"73","hashOfConfig":"55"},{"size":1098,"mtime":1676129943407,"results":"74","hashOfConfig":"55"},{"size":746,"mtime":1677166973324,"results":"75","hashOfConfig":"55"},{"size":5227,"mtime":1721916451369,"results":"76","hashOfConfig":"55"},{"size":1133,"mtime":1704085175646,"results":"77","hashOfConfig":"55"},{"size":917,"mtime":1721548301989,"results":"78","hashOfConfig":"55"},{"size":16048,"mtime":1722756547179,"results":"79","hashOfConfig":"55"},{"size":773,"mtime":1610185767507,"results":"80","hashOfConfig":"55"},{"size":1009,"mtime":1674750896664,"results":"81","hashOfConfig":"55"},{"size":7485,"mtime":1674751013479,"results":"82","hashOfConfig":"55"},{"size":1581,"mtime":1701496223879,"results":"83","hashOfConfig":"55"},{"size":3082,"mtime":1674750896662,"results":"84","hashOfConfig":"55"},{"size":7317,"mtime":1720956577116,"results":"85","hashOfConfig":"55"},{"size":3796,"mtime":1721391531954,"results":"86","hashOfConfig":"55"},{"size":425,"mtime":1701534240015,"results":"87","hashOfConfig":"55"},{"size":3428,"mtime":1701502050584,"results":"88","hashOfConfig":"55"},{"size":1958,"mtime":1722757754868,"results":"89","hashOfConfig":"55"},{"size":1381,"mtime":1722147675399,"results":"90","hashOfConfig":"55"},{"size":231,"mtime":1722179128645,"results":"91","hashOfConfig":"55"},{"size":497,"mtime":1704201680657,"results":"92","hashOfConfig":"55"},{"size":1734,"mtime":1722725493305,"results":"93","hashOfConfig":"55"},{"size":4119,"mtime":1722757672862,"results":"94","hashOfConfig":"55"},{"size":3829,"mtime":1722151544344,"results":"95","hashOfConfig":"55"},{"size":1282,"mtime":1704290400125,"results":"96","hashOfConfig":"55"},{"size":456,"mtime":1704107212686,"results":"97","hashOfConfig":"55"},{"size":3497,"mtime":1722695069457,"results":"98","hashOfConfig":"55"},{"size":1502,"mtime":1722674630494,"results":"99","hashOfConfig":"55"},{"size":510,"mtime":1722725695682,"results":"100","hashOfConfig":"55"},{"size":418,"mtime":1722693250373,"results":"101","hashOfConfig":"55"},{"size":2586,"mtime":1722344049733,"results":"102","hashOfConfig":"55"},{"size":1437,"mtime":1722755960779,"results":"103","hashOfConfig":"55"},{"size":399,"mtime":1704108106146,"results":"104","hashOfConfig":"55"},{"size":3039,"mtime":1722150612295,"results":"105","hashOfConfig":"55"},{"size":713,"mtime":1722718874305,"results":"106","hashOfConfig":"55"},{"size":2645,"mtime":1722178424870,"results":"107","hashOfConfig":"55"},{"filePath":"108","messages":"109","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},"uxxpl5",{"filePath":"111","messages":"112","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"113","messages":"114","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"115","usedDeprecatedRules":"110"},{"filePath":"116","messages":"117","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"118","messages":"119","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"120","messages":"121","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"122","messages":"123","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"124","usedDeprecatedRules":"110"},{"filePath":"125","messages":"126","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"127","usedDeprecatedRules":"110"},{"filePath":"128","messages":"129","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"130","messages":"131","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"132","messages":"133","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"134","messages":"135","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"136","messages":"137","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"138","messages":"139","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"140","messages":"141","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"142","messages":"143","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"144","messages":"145","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"146","usedDeprecatedRules":"110"},{"filePath":"147","messages":"148","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"149","usedDeprecatedRules":"110"},{"filePath":"150","messages":"151","errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"152","usedDeprecatedRules":"110"},{"filePath":"153","messages":"154","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"155","messages":"156","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"157","usedDeprecatedRules":"110"},{"filePath":"158","messages":"159","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"160","messages":"161","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"162","usedDeprecatedRules":"110"},{"filePath":"163","messages":"164","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"165","usedDeprecatedRules":"110"},{"filePath":"166","messages":"167","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"168","usedDeprecatedRules":"110"},{"filePath":"169","messages":"170","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"171","messages":"172","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"173","usedDeprecatedRules":"110"},{"filePath":"174","messages":"175","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"176","usedDeprecatedRules":"110"},{"filePath":"177","messages":"178","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"179","messages":"180","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"181","usedDeprecatedRules":"110"},{"filePath":"182","messages":"183","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"184","messages":"185","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"186","messages":"187","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"188","messages":"189","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"190","messages":"191","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"192","messages":"193","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"194","messages":"195","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"196","messages":"197","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"198","messages":"199","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"200","messages":"201","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"202","messages":"203","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"204","messages":"205","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"206","usedDeprecatedRules":"110"},{"filePath":"207","messages":"208","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"209","messages":"210","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"211","messages":"212","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"213","messages":"214","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"215","messages":"216","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"217","messages":"218","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"219","messages":"220","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"221","messages":"222","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"223","messages":"224","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"225","usedDeprecatedRules":"110"},{"filePath":"226","messages":"227","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"228","usedDeprecatedRules":"110"},{"filePath":"229","messages":"230","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},"/Users/jacklee/Project/OpenSource/autonomy/src/index.js",[],["231","232"],"/Users/jacklee/Project/OpenSource/autonomy/src/reportWebVitals.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/App.js",["233","234","235","236","237","238","239"],"import { useState, useEffect } from 'react';\nimport styles from './App.less';\nimport moment from 'moment';\nimport FileSearch from './components/FileSearch';\nimport FileList from './components/FileList';\nimport Note from './note';\nimport Todo from './todo';\nimport Aim from './aim';\nimport { ConfigProvider, Dropdown } from 'antd';\n// import zhCN from 'antd/locale/zh_CN';\nimport {\n  defaultFiles,\n  initAllFiles,\n  importChildren,\n  findItemById,\n  editItemById,\n  createItemByFatherId,\n  deleteItemById,\n  getChildrenFilePath,\n  getIconByFileType,\n  deleteExtraAttr,\n  deepClone,\n  defaultKeys,\n  deepTree,\n} from './utils/treeHelper';\nimport emptyImg from '../public/empty.png';\nimport shortid from 'shortid';\nimport fileHelper from './utils/fileHelper';\nimport useIpcRenderer from './hooks/useIpcRenderer';\nimport Draggable from 'react-draggable';\nimport { getSaveLocation, getAutoSync } from './utils/helper.js';\nimport Music from './music';\nimport { DEFAULT_NOTE } from './components/SlateEditor/constant.js';\nimport pdfjsWorker from 'pdfjs-dist/build/pdf.worker.entry';\nimport Book from './book/index.jsx';\nimport Report from './todo/components/Report';\nimport { CaretLeftOutlined, CaretRightOutlined } from '@ant-design/icons';\n\n\n// Node API\nconst isDev = require('electron-is-dev');\nconst pdfjsLib = require('pdfjs-dist');\npdfjsLib.GlobalWorkerOptions.workerSrc = pdfjsWorker;\nconst fs = require('fs');\nconst { remote, ipcRenderer } = window.require('electron');\nconst { join, basename, extname, dirname } = window.require('path');\nconst Store = window.require('electron-store');\n\nconst fileStore = new Store({ name: isDev ? 'Dev Data' : 'Files Data' });\n// fileStore.set('files', defaultFiles); //重置操作 22.14.13\n\nconst savedLocation = getSaveLocation();\n\nconst defaultSiderWidth = 260;\nconst miniSiderWidth = 190;\nconst maxSiderWidth = 360;\n\n\nconst reportTypes = [\n  {key:'day',label:'日报',},\n  {key:'week',label:'周报',},\n  {key:'month',label:'月报',},\n  {key:'',label:'季报',},\n  {key:'year',label:'年报',},\n]\n\n/**\n * state分析\n * - 文件列表 【】\n * - 搜索后的文件列表 key\n * - 未保存的文件列表 [id]\n * - 已经打开的文件列表 [id]\n * - 当前选中的文件\n */\nfunction App() {\n  const [files, setFiles] = useState(\n    fileStore.get('files')||defaultFiles\n  );\n  // console.log('remote.app.getPath', remote.app.getPath('userData'));\n  const [activeFileId, setActiveFileId] = useState(\n    fileStore.get('activeFileId')\n  );\n  const [openedFileIds, setOpenedFileIds] = useState([]);\n  const [siderClose, setSiderClose]= useState(false);\n  const [unsavedFileIds, setUnsavedFileIds] = useState([]);\n  const [newFile, setNewFile] = useState(null);\n  const [siderWidth, setSiderWidth] = useState(defaultSiderWidth);\n  const [reportType, setReportOpen] = useState('none');\n  const [expandedKeys, setExpandedKeys] = useState(\n    fileStore.get('expandedKeys') || []\n  );\n\n  useEffect(() => {\n    if (fileStore) {\n      fileStore.set('expandedKeys', expandedKeys || []);\n    }\n  }, [expandedKeys]);\n\n  const activeFile = findItemById(files, activeFileId);\n  useEffect(() => {\n    if (activeFile && !activeFile.isLoaded) {\n      openClickedFile(activeFileId, activeFile.isLoaded, activeFile.path);\n    }\n  }, []);\n  // const openedFiles = findItemsByIds(files, openedFileIds);\n  // const unsavedFiles = findItemsByIds(files, unsavedFileIds);\n  useEffect(() => {\n    if (fileStore && activeFileId) {\n      fileStore.set('activeFileId', activeFileId);\n    }\n  }, [activeFileId]);\n\n  const saveFile2Store = (data) => {\n    const newData = deleteExtraAttr(deepClone(data));\n    newData && fileStore.set('files', newData);\n  };\n\n  const clearUnsavedFile = (id) => {\n    const newUnsavedFileIds = unsavedFileIds.filter((fileId) => fileId !== id);\n    setUnsavedFileIds(newUnsavedFileIds);\n  };\n\n  const closeOpenedFile = (id) => {\n    const newOpenedFileIds = openedFileIds.filter((openId) => openId !== id);\n    setOpenedFileIds(newOpenedFileIds);\n    if (newOpenedFileIds.length > 0) {\n      setActiveFileId(newOpenedFileIds[newOpenedFileIds.length - 1]);\n    } else {\n      setActiveFileId('');\n    }\n  };\n\n  const saveBeforSwitchFile = (id, isLoaded, path) => {\n    if (activeFile) {\n      saveEditFile().then(() => {\n        openClickedFile(id, isLoaded, path);\n      });\n    } else {\n      openClickedFile(id, isLoaded, path);\n    }\n  };\n\n  const openClickedFile = (id, isLoaded, path) => {\n    const isExists = fileHelper.exists(path);\n    const curFile = findItemById(files, id);\n    if (!isLoaded && path) {\n      // TODO\n      if (getAutoSync()) {\n        ipcRenderer.send('download-file', {\n          key: `${curFile.title}.md`,\n          path: curFile.path,\n          id: curFile.id,\n          updatedAt: curFile.updatedAt,\n        });\n      } else {\n        if (!isExists) {\n          fileHelper.writeFile(path, '').then(() => {\n            const newFiles = editItemById(files, id, {\n              body: '',\n              isLoaded: true,\n            });\n            setFiles(newFiles);\n            if (!openedFileIds.includes(id)) {\n              setOpenedFileIds([...openedFileIds, id]);\n            }\n          });\n        } else {\n          fileHelper.readFile(path).then((val) => {\n            // console.log('readFile-222', path, val);\n            const newFiles = editItemById(files, id, {\n              body: val,\n              isLoaded: true,\n            });\n            setFiles(newFiles);\n            if (!openedFileIds.includes(id)) {\n              setOpenedFileIds([...openedFileIds, id]);\n            }\n          });\n        }\n      }\n      setActiveFileId(id);\n    } else {\n      setActiveFileId(id);\n      if (!openedFileIds.includes(id)) {\n        setOpenedFileIds([...openedFileIds, id]);\n      }\n    }\n  };\n  const deleteFile = (id, path, isLeaf = false) => {\n    //删除默认文件夹\n    if (defaultKeys.includes(id)) {\n      const newFiles = deleteItemById(files, id);\n      saveFile2Store(newFiles);\n      setFiles(newFiles);\n      closeOpenedFile(id);\n      clearUnsavedFile(id);\n      return;\n    }\n    if (isLeaf && isLeaf !== 'false') {\n      fileHelper.deleteFile(path).then(() => {\n        const newFiles = deleteItemById(files, id);\n        saveFile2Store(newFiles);\n        setFiles(newFiles);\n        closeOpenedFile(id);\n        clearUnsavedFile(id);\n      });\n    } else {\n      const curFolder = findItemById(files, id);\n      const allDeletePath = getChildrenFilePath(curFolder.children);\n      Promise.all(\n        allDeletePath.map((path) => fileHelper.deleteFile(path))\n      ).then(() => {\n        const newFiles = deleteItemById(files, id);\n        saveFile2Store(newFiles);\n        setFiles(newFiles);\n        closeOpenedFile(id);\n        clearUnsavedFile(id);\n      });\n    }\n  };\n  const createNewFile = (fatherId, type, isLeaf, nId) => {\n    const newId = nId || shortid.generate();\n    const newPath = join(\n      `${savedLocation}${type}/`,\n      `${newId}.json` //${type === 'note' ? '.md' : '.json'}\n    );\n\n    const defalutBody = type === 'note' ? JSON.stringify(DEFAULT_NOTE) : '';\n\n    const folder = isLeaf\n      ? {\n          path: newPath,\n          body: defalutBody,\n        }\n      : { children: [] };\n    const newFile = {\n      id: newId,\n      title: '',\n      key: newId,\n      type,\n      icon: getIconByFileType(type, isLeaf),\n      createAt: moment().valueOf(),\n      isLeaf,\n      isSync: false,\n      isLoaded: true,\n      updatedAt: 0,\n      ...folder,\n    };\n    const newFiles = createItemByFatherId(files, fatherId, newFile);\n    if (isLeaf) {\n      fileHelper.writeFile(newPath, defalutBody).then((res) => {\n        setNewFile(newFile);\n        setFiles(newFiles);\n        // 默认打开 openClickedFile(newId, true, newPath);\n        setActiveFileId(newId);\n        if (!openedFileIds.includes(newId)) {\n          setOpenedFileIds([...openedFileIds, newId]);\n        }\n      });\n    } else {\n      setNewFile(newFile);\n      setFiles(newFiles);\n    }\n    setExpandedKeys((keys) => [...keys, fatherId]);\n  };\n  const renameFile = (id, path, title, type, isLeaf = false) => {\n    if (isLeaf) {\n      const newPath = `${dirname(path)}/${title}${\n        type === 'note' ? '.md' : '.json'\n      }`;\n      fileHelper.renameFile(path, newPath).then(() => {\n        const newFiles = editItemById(files, id, { title, path: newPath });\n        // 默认打开 openClickedFile(newId, true, newPath);\n        console.log('newFiles==', newFiles)\n        setActiveFileId(id);\n        if (!openedFileIds.includes(id)) {\n          setOpenedFileIds([...openedFileIds, id]);\n        }\n        saveFile2Store(newFiles);\n        setFiles(newFiles);\n        setNewFile(null);\n      });\n    } else {\n      const newFiles = editItemById(files, id, { title });\n      saveFile2Store(newFiles);\n      setFiles(newFiles);\n      setNewFile(null);\n    }\n  };\n\n  const handleDropEnd=(info)=>{\n    console.log(info);\n    const dropKey = info.node.key;\n    const dragKey = info.dragNode.key;\n    const dropPos = info.node.pos.split('-');\n    const dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]); // the drop position relative to the drop node, inside 0, top -1, bottom 1\n\n    const loop = (data, key, callback) => {\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].key === key) {\n          return callback(data[i], i, data);\n        }\n        if (data[i].children) {\n          loop(data[i].children, key, callback);\n        }\n      }\n    };\n    const data = [...files];\n\n    // Find dragObject\n    let dragObj;\n    loop(data, dragKey, (item, index, arr) => {\n      arr.splice(index, 1);\n      dragObj = item;\n    });\n    if (!info.dropToGap) {\n      // Drop on the content\n      loop(data, dropKey, (item) => {\n        item.children = item.children || [];\n        // where to insert. New item was inserted to the start of the array in this example, but can be anywhere\n        item.children.unshift(dragObj);\n      });\n    } else {\n      let ar = [];\n      let i;\n      loop(data, dropKey, (_item, index, arr) => {\n        ar = arr;\n        i = index;\n      });\n      if (dropPosition === -1) {\n        // Drop on the top of the drop node\n        ar.splice(i, 0, dragObj);\n      } else {\n        // Drop on the bottom of the drop node\n        ar.splice(i + 1, 0, dragObj);\n      }\n    }\n    saveFile2Store(data)\n    setFiles(data);\n  }\n\n  const fileChange = (id, value, info, autoSave = false) => {\n    if (typeof value !== 'string') {\n      value = JSON.stringify(value);\n    }\n    if (\n      value !== activeFile.body ||\n      JSON.stringify(info || {}) !== JSON.stringify(activeFile.info)\n    ) {\n      const newFiles = editItemById(files, id, {\n        body: value,\n        ...(info || {}),\n      });\n      setFiles(newFiles);\n      if (info) {\n        saveFile2Store(newFiles);\n      }\n      if (autoSave) {\n        saveEditFile();\n      } else if (!unsavedFileIds.includes(id)) {\n        setUnsavedFileIds([...unsavedFileIds, id]);\n      }\n    }\n  };\n\n  const saveEditFile = () => {\n    const activeFile = findItemById(files, activeFileId);\n    if (!activeFile) return;\n    // console.log('我要开始执行save了');\n    const { path, body, title } = activeFile;\n    // if (activeFile.type === 'note') {\n    // console.log('保存文件，我执行了', path, body);\n    if (!body) {\n      // message.error('保存异常：内容未定义');\n      return Promise.resolve(false);\n    }\n    return fileHelper.writeFile(path, body).then(() => {\n      setUnsavedFileIds(unsavedFileIds.filter((id) => id !== activeFileId));\n      if (getAutoSync()) {\n        ipcRenderer.send('upload-file', {\n          key: `${title}.md`,\n          path: path,\n        });\n      }\n    });\n    // }\n  };\n\n  const onImportFiles = (id, type, dialogCfg) => {\n    const { extension = ['md'], title = '选择导入MD文档' } = dialogCfg;\n    remote.dialog\n      .showOpenDialog({\n        title,\n        filters: [{ name: 'Markdown Files', extension }],\n        properties: ['openFile', 'multiSelections'],\n      })\n      .then(async ({ filePaths }) => {\n        if (Array.isArray(filePaths)) {\n          // TODO 过滤已经添加过的文件\n          const children = filePaths.map((path) => {\n            let newId = shortid.generate();\n            const isBook = path.endsWith('.pdf');\n            const title = basename(path, extname(path));\n            let lastPath = path;\n\n            if(isBook){\n              newId = 'book_' + newId;\n              lastPath = join(`${savedLocation}pdf-books/`, title+extname(path))\n              fileHelper.copyFile(path, `${savedLocation}pdf-books/`, title+extname(path))\n            }else{\n              newId = 'import_' + newId\n            }\n            console.log('----1111---', newId, lastPath)\n            return {\n              id: newId,\n              key: newId,\n              ...(isBook\n                ? {\n                    type: 'book',\n                    pdf: lastPath,\n                    path: join(`${savedLocation}${type}/`, `${newId}.json`),\n                  }\n                : { type, path }),\n              title,\n              icon: getIconByFileType(type, true),\n              createAt: moment().valueOf(),\n              isLeaf: true,\n              isSync: false,\n              updatedAt: 0,\n            };\n          });\n          // const newFiles = importChildren(files, id, children);\n          const newFiles = deepTree(files, (item) => {\n            if (item.id === id) {\n              return {\n                ...item,\n                children: [...item.children, ...children],\n              };\n            }\n          });\n          console.log('new-files', files, id, children, newFiles);\n          saveFile2Store(newFiles);\n          setFiles(newFiles);\n          if (children.length > 0) {\n            remote.dialog.showMessageBox({\n              type: 'info',\n              title: `导入成功`,\n              message: `成功导入了${children.length}个文件`,\n            });\n          }\n        }\n      });\n  };\n\n  const activeFileUploaded = () => {\n    const newFiles = editItemById(files, activeFileId, {\n      isSynced: true,\n      uploadedAt: moment().valueOf(),\n    });\n    setFiles(newFiles);\n    saveFile2Store(newFiles);\n  };\n\n  const activeFileDownloaded = (_, data) => {\n    // // console.log('activeFileDownloaded++++', data);\n    const curFile = findItemById(files, data.id);\n    // // console.log('activeFileDownloaded++++', curFile.path);\n    fileHelper.readFile(curFile.path).then((value) => {\n      // // console.log('readFile++++++', value);\n      let newData;\n      if (data.status === 'downloaded-success') {\n        newData = {\n          body: value,\n          isLoaded: true,\n          isSynced: true,\n          updatedAt: moment().valueOf(),\n        };\n      } else {\n        newData = {\n          body: value,\n          isLoaded: true,\n        };\n      }\n      // // console.log('activeFileDownloaded', newData);\n      const newFiles = editItemById(files, data.id, newData);\n      setFiles(newFiles);\n      saveFile2Store(newFiles);\n    });\n  };\n\n  const handleDrag = (_, ui) => {\n    const dragWidth = ui.x + defaultSiderWidth;\n    setSiderWidth(dragWidth);\n  };\n\n  const handleCloseSider=()=>{\n    setSiderClose(!siderClose)\n  }\n\n  useIpcRenderer({\n    'active-file-uploaded': activeFileUploaded,\n    'file-downloaded': activeFileDownloaded,\n    'save-edit-file': saveEditFile,\n  });\n  // console.log('activeFileId', activeFile, files, JSON.stringify(files));\n  return (\n    <div className={styles.App}>\n      <div style={{ height: '100%', display: 'flex' }}>\n        <div\n          style={{\n            width: siderWidth,\n            background: '#6E6E6E',\n            color: 'white',\n            minWidth: siderWidth,\n            position: 'relative',\n          }}\n          className={`${styles.siderBar} ${siderClose?styles.sider_hide:styles.sider_show}`}\n        >\n          {\n            !siderClose&&\n            <>\n              <div className={styles.dragArea} />\n              <FileSearch\n                title=\"\"\n                onFileSearch={(val) => {\n                  // console.log(val);\n                }}\n              />\n              <FileList\n                activeId={activeFileId}\n                files={deepClone(files)}\n                newFile={newFile}\n                expanded={{ expandedKeys, setExpandedKeys }}\n                // openedFiles={openedFiles}\n                onImportFiles={onImportFiles}\n                closeOpenedFile={closeOpenedFile}\n                unsavedFileIds={unsavedFileIds}\n                onFileClick={saveBeforSwitchFile}\n                createNewFile={createNewFile}\n                onDropEnd={handleDropEnd}\n                onFileDelete={deleteFile}\n                onFileRename={renameFile}\n              />\n            </>\n          }\n          <Draggable\n            axis=\"x\"\n            bounds={{\n              left: miniSiderWidth - defaultSiderWidth,\n              right: maxSiderWidth - defaultSiderWidth,\n            }}\n            defaultPosition={{ x: 0, y: 0 }}\n            onDrag={handleDrag}\n          >\n            <div className={styles.handle} style={siderClose?{left: '0px'}:{}} >\n              <span className={styles.actions} onClick={handleCloseSider} style={siderClose?{display:'inline-flex'}:{}} >\n                {\n                  siderClose?<CaretRightOutlined />:<CaretLeftOutlined />\n                }\n              </span>\n            </div>\n          </Draggable>\n        </div>\n        <div\n          style={{ flex: 1, backgroundColor: '#fafbfc', overflow: 'hidden' }}\n        >\n          {!activeFile ? (\n            <div className={styles.empty}>\n              <div\n                style={{ width: '100%', position: 'absolute', top: 0 }}\n                className={styles.dragArea}\n              />\n              <img src={emptyImg} alt=\"没有数据\" />\n              <span className={styles.emptyWord}>空空如也</span>\n            </div>\n          ) : (\n            <>\n              <h1\n                className={styles.dragArea}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  height: 58,\n                  padding: '0 58px',\n                  fontSize: 26,\n                  fontWeight: 600,\n                  margin: 0,\n                  backgroundColor: '#fafbfc',\n                  position: 'relative',\n                }}\n              >\n                {unsavedFileIds.includes(activeFileId) && (\n                  <span className={styles.unsaveIcon} />\n                )}\n                {activeFile.title || ''}\n                {/* <Dropdown \n                  menu={{ \n                    items: reportTypes,\n                    onClick: onMenuClick\n                  }}> */}\n                  {\n                    activeFile.type === 'todo'&&\n                    <span className={styles.report_text} onClick={()=>setReportOpen('week')}>生成周报</span>\n                  }\n                {/* </Dropdown> */}\n              </h1>\n              {activeFile.type === 'todo' ? (\n                <Todo activeFile={activeFile} onChange={fileChange}/>\n              ) : activeFile.type === 'note' ? (\n                <Note activeFile={activeFile} onChange={fileChange} />\n              ) : activeFile.type === 'book' ? (\n                <Book activeFile={activeFile} onChange={fileChange} />\n              ) : activeFile.type === 'aim' ? (\n                <Aim activeFile={activeFile} onChange={fileChange} />\n              ) : activeFile.type === 'music' ? (\n                <Music activeFile={activeFile} onChange={fileChange} />\n              ) : (\n                <div className={styles.empty}>\n                  <h3 style={{ color: 'red' }}>\n                    {activeFile.title}, 正在开发中...\n                  </h3>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n        {\n          reportType !== 'none' &&(\n            <Report type={reportType} activeFile={activeFile} closeReport={()=>{\n              setReportOpen('none')\n            }}/>\n          )\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/jacklee/Project/OpenSource/autonomy/src/utils/fileHelper.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/music/Iframe.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/utils/helper.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/book/index.jsx",["240"],"/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport { Pagination } from 'antd';\nimport styles from './index.less';\n// import { getSaveLocation } from '../utils/helper';\n// import Editor from '../components/CKEditor'; \nimport Editor from '../components/SlateEditor'; \nimport fileHelper from '../utils/fileHelper';\nimport { combinePdfTextToRichText } from './utils';\n\n\nconst Book = ({ activeFile, onChange }) => {\n  let { id, body, path, pdf, info, isLoaded = false } = activeFile;\n  console.log('bodybody', info, isLoaded)\n  const bookBody = JSON.parse(body||'{}');\n  const [current, setCurrent] = useState(info?.current||1);\n  // const [images, setImages] = useState([]);\n  // const [activeId, setActiveId]=useState(id);\n  // const [data, setData] = useState('');\n  useEffect(()=>{\n    setCurrent(info?.current||1)\n  },[isLoaded])\n  const handleContentChange = (data) => {\n    if (data !== body) {\n      onChange(id, {...bookBody, [current]: data});\n    }\n  };\n  const onPageChange = (current) => {\n    console.log('idid:Page: ', current);\n    setCurrent(current)\n    if(isLoaded){\n      onChange(id, bookBody, {info:{...info, current}})\n    }\n  };\n  useEffect(() => {\n      async function initPdf(){\n        console.log('readPdfinit', current, bookBody)\n        if(!bookBody?.[current]){\n          const {data, info, images} = await fileHelper.readPdfPage(pdf, current);\n          // setImages(images)\n          console.log('page-data==>', data, info, images)\n          const {result} = combinePdfTextToRichText(data, info, images);\n          const newBody = {\n              ...bookBody,\n              [current]: result\n          };\n          onChange(id, newBody, {info:{...info, current}})\n        }\n      }\n      isLoaded&&pdf&&initPdf();\n  }, [id, current, isLoaded]);\n\n  console.log('idid', id, activeFile, current, bookBody?.[current])\n  return (\n    <div className={styles.Book}>\n      {\n        bookBody?.[current]&& //Object.keys(bookBody||{})?.length>0&&\n        <Editor id={id} page={current} value={bookBody?.[current]} onChange={handleContentChange} isLoaded={isLoaded}/>\n      }\n      {\n        info?.size&&\n        <Pagination\n         locale={'zhCN'} \n         size='small' \n         showQuickJumper \n         showSizeChanger={false} \n         current={current} \n         total={info?.size} \n         pageSize={1}\n         onChange={onPageChange}\n        />\n      }\n    </div>\n  );\n};\n\nexport default Book;\n","/Users/jacklee/Project/OpenSource/autonomy/src/utils/pdf.js",["241"],"import fileHelper from './fileHelper';\nimport { getSaveLocation } from './helper';\n\nconst pdfjsLib = require('pdfjs-dist');\n\nconst savedLocation = getSaveLocation();\n\nexport const getPdfPageText = async (pdf, pageNo) => {\n  const page = await pdf.getPage(pageNo);\n  const tokenizedText = await page.getTextContent();\n  const pageText = tokenizedText.items.map((token) => token.str).join('');\n  return pageText;\n};\n\nexport const getPdfPageTextWithStatus = async (page, operatorList) => {\n  // const page = await pdf.getPage(pageNo);\n  const tokenizedText = await page.getTextContent();\n  // const operatorList = await page.getOperatorList();\n\n  console.log('pdfjs-page-content', tokenizedText);\n  return tokenizedText.items.map((token) => ({\n    item: token,\n    fontFace: page?.commonObjs?.get(token.fontName),\n    // status: getTextStatus(token, operatorList, pdfjsLib.OPS),\n  }));\n};\n\nexport const getPdfPageImages = async (page, operatorList) => {\n  // page.getAnnotations().then(function (items) {\n  //   console.log('getAnnotations', items);\n  // });\n  // const resources = page.commonObjs.get('Resources');\n  console.log('bmp: ', page, page.commonObjs);\n  // 提取图片\n  return operatorList.fnArray\n    .reduce((acc, curr, i) => {\n      if (\n        [\n          pdfjsLib.OPS.paintImageXObject,\n          pdfjsLib.OPS.paintJpegXObject,\n        ].includes(curr)\n      ) {\n        acc.push(operatorList.argsArray[i][0]);\n        console.log(\n          'xxxx=>>>',\n          i,\n          acc,\n          curr,\n          operatorList,\n          operatorList.argsArray,\n          operatorList.argsArray[i]\n        );\n      }\n      return acc;\n    }, [])\n    .map((item) => {\n      // const [x, y] = resources.get(item).get('BBox');\n      const image = page.objs.get(item);\n      console.log('getImageStatus===>', item, image);\n      if (image.currentSrc) {\n        return {\n          src: image.currentSrc,\n          naturalWidth: image.naturalWidth,\n          naturalHeight: image.naturalHeight,\n          // x,\n          // y,\n        };\n      }\n      if (image.data instanceof Uint8ClampedArray) {\n        const canvas = document.createElement('canvas'); // ;new OffscreenCanvas(image.width, image.height);\n        canvas.width = image.width;\n        canvas.height = image.height;\n        const ctx = canvas.getContext('2d');\n\n        // now you need a new clamped array because the original one, may not contain rgba data, and when you insert you want to do so in rgba form, I think that a simple check of the size of the clamped array should work, if it's 3 times the size aka width*height*3 then it's rgb and shall be converted, if it's 4 times, then it's rgba and can be used as it is; in my case it had to be converted, and I think it will be the most common case\n        const data = new Uint8ClampedArray(image.width * image.height * 4);\n        let k = 0;\n        let i = 0;\n        while (i < image.data.length) {\n          data[k] = image.data[i]; // r\n          data[k + 1] = image.data[i + 1]; // g\n          data[k + 2] = image.data[i + 2]; // b\n          data[k + 3] = 255; // a\n\n          i += 3;\n          k += 4;\n        }\n\n        // now here I create the image data context\n        const imgData = ctx.createImageData(image.width, image.height);\n        imgData.data.set(data);\n        ctx.putImageData(imgData, 0, 0);\n        // get myself a buffer\n        // const buff = canvas.toBuffer('image/png');\n        const filePath = savedLocation + '/image/33' + item + '.png';\n        // and I wrote the file, worked like charm, but this buffer encodes for a png image, which can be rather large, with an image conversion utility like sharp.js you may get better results by compressing the thing.\n\n        const src = canvas.toDataURL('image/png');\n        const base64 = src\n          .replace(/^data:image\\/\\w+;base64,/, '')\n          .replace(/s/g, '+');\n        const buff = Buffer.from(base64, 'base64');\n\n        fileHelper.writeFile(filePath, buff);\n        console.log('ddddd', base64 === buff.toString('base64'), {\n          src, //(await canvas.convertToBlob()) || filePath,\n          base64,\n          naturalWidth: image.width,\n          naturalHeight: image.height,\n        });\n        return {\n          src,\n          naturalWidth: image.width,\n          naturalHeight: image.height,\n        };\n      }\n      // const bmp = image.bitmap;\n      // console.log('bmp: ', bmp, image.src);\n      // // OffscreenCanvas\n      // const resizeScale = 1 / 4; // 这个可以控制转换后的图片大小\n      // const width = bmp.width * resizeScale;\n      // const height = bmp.height * resizeScale;\n      // const canvas = new OffscreenCanvas(width, height);\n      // // 获取 canvas bitmaprenderer 上下文\n      // const ctx = canvas.getContext('bitmaprenderer');\n      // // 把 ImageBitmap 渲染到 OffscreenCanvas\n      // ctx.transferFromImageBitmap(bmp);\n      // // 把 canvas 画布转化为 Blob 对象\n      // // https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas/convertToBlob\n      // // const blob = await canvas.convertToBlob();\n      // // console.log('blob: ', blob); // blob\n      // // 最后使用 Blob 作为 URL.createObjectURL 的参数，渲染出 img 图片\n      // // 如果不需要渲染，则可以讲 Blob 数据上传到云存储\n      // const buffer = canvas.toBuffer('image/png');\n      // // fs.writeFileSync('./test.png', buffer);\n      // fileHelper.writeFile(savedLocation + 'image/test.png', buffer);\n      // page.objs.get(item, (image) => {\n      //   console.log('bmp:image: ', item, image);\n      //   // lastImage = image;\n      //   (async function () {\n\n      //   })();\n      // });\n    });\n};\n\nexport function getTextStatus(item, operatorList, OPS) {\n  // 记录状态的堆栈\n  const stack = [];\n  // 当前状态记录\n  let currentStatus = {};\n\n  // 按顺序分析页面指令\n  for (let i = 0; i < operatorList.fnArray.length; i++) {\n    const fn = operatorList.fnArray[i];\n    const args = operatorList.argsArray[i];\n    switch (fn) {\n      //保存\n      case OPS.save:\n        stack.push(currentStatus);\n        currentStatus = { ...currentStatus };\n        break;\n      //还原\n      case OPS.restore:\n        currentStatus = stack.pop() ?? {};\n        break;\n      //设置文本填充颜色\n      case OPS.setFillRGBColor:\n        currentStatus.currentColor = [args[0], args[1], args[2]];\n        break;\n      //设置文本区域\n      case OPS.setTextMatrix:\n        currentStatus.currentMatrix = [args[4], args[5]];\n        currentStatus.currentXY = [args[4], args[5]];\n        break;\n      //设置行距\n      case OPS.setLeading:\n        currentStatus.leading = args[0];\n        break;\n      //设置字体类型和大小\n      case OPS.setFont:\n        currentStatus.font = [args[0], args[1]];\n        break;\n      //计算换行, 换行时当前坐标需要跳到下一行的开头\n      case OPS.nextLine:\n      case OPS.nextLineShowText:\n      case OPS.nextLineSetSpacingShowText:\n        if (currentStatus.leading && currentStatus.currentXY) {\n          currentStatus.currentXY = [\n            currentStatus.currentXY[0],\n            currentStatus.currentXY[1] - currentStatus.leading,\n          ];\n        }\n        break;\n      //移动文本坐标\n      case OPS.moveText:\n        if (currentStatus.currentXY) {\n          currentStatus.currentXY = [\n            currentStatus.currentXY[0] + args[0],\n            currentStatus.currentXY[1] + args[1],\n          ];\n        }\n        break;\n      //显示文本\n      case OPS.showText:\n        if (currentStatus.currentXY) {\n          let x = currentStatus.currentXY[0];\n          let y = currentStatus.currentXY[1];\n          // 判断文本是否匹配定位\n          const isMatch = () =>\n            Math.abs(x - item.transform[4]) < item.height / 5 &&\n            Math.abs(y - item.transform[5]) < item.height / 5;\n          if (isMatch()) {\n            return currentStatus.currentColor;\n          }\n          if (args[0]) {\n            // 计算打印的每个字的实际坐标, 然后和item的坐标进行配对\n            for (let charInfo of args[0]) {\n              if (typeof charInfo?.width == 'number' && currentStatus.font) {\n                if (isMatch()) {\n                  return currentStatus.currentColor;\n                }\n                x += (charInfo?.width / 1000) * currentStatus.font[1];\n              } else if (typeof charInfo == 'number' && currentStatus.font) {\n                if (isMatch()) {\n                  return currentStatus.currentColor;\n                }\n                x -= (charInfo / 1000) * currentStatus.font[1];\n              }\n            }\n          }\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  return currentStatus;\n}\n\nexport function getImageStatus(item, operatorList, OPS) {\n  // 记录状态的堆栈\n  const stack = [];\n  // 当前状态记录\n  let currentStatus = {};\n\n  // 按顺序分析页面指令\n  for (let i = 0; i < operatorList.fnArray.length; i++) {\n    const fn = operatorList.fnArray[i];\n    const args = operatorList.argsArray[i];\n    switch (fn) {\n      //保存\n      case OPS.save:\n        stack.push(currentStatus);\n        currentStatus = { ...currentStatus };\n        break;\n      //还原\n      case OPS.restore:\n        currentStatus = stack.pop() ?? {};\n        break;\n      //设置文本区域\n      case OPS.setTextMatrix:\n        currentStatus.currentMatrix = [args[4], args[5]];\n        currentStatus.currentXY = [args[4], args[5]];\n        currentStatus.args = args;\n        currentStatus.index = i;\n        break;\n      case OPS.paintImageXObject:\n      case OPS.paintJpegXObject:\n        if (args[0] === item) {\n          console.log('getImageStatus===>', currentStatus, i);\n          return currentStatus;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  return {};\n}\n","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/constant.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/setting/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/crash/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/utils/treeHelper.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/FileSearch.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/FileList.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useIpcRenderer.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/book/utils.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/music/index.js",["242","243"],"import React, { useState } from 'react';\nimport { Tabs, Input } from 'antd';\nimport styles from './index.less';\n\nconst { TabPane } = Tabs;\nvar location = ''; // new Object();\n// window.parent.location.href=\"http://www.baidu.com\"\n\nconst Music = () => {\n  const {musicList} = useState({\n    musicList:[1,2,3]\n  })\n  const onSearch = (value) => {\n    // console.log('value:', value);\n  };\n\n  const handleItemClick=()=>{\n    \n  }\n  return (\n    <div className={styles.Music}>\n      <Input.Search\n        placeholder=\"搜索歌名\"\n        onSearch={onSearch}\n        style={{ display: 'block', width: 360, margin: '0 auto 16px' }}\n      />\n      {\n        musicList.map(item=>{\n          return <p onClick={handleItemClick}>\n            {item}\n          </p>\n        })\n      }\n    </div>\n  );\n};\n\nexport default Music;\n","/Users/jacklee/Project/OpenSource/autonomy/src/aim/index.js",["244","245","246","247","248","249","250"],"import React, { useState } from 'react';\n// import { useIdb } from 'react-use-idb';\nimport moment from 'moment';\nimport styles from './index.less';\nimport AimList from './AimList';\nimport { EAimType, EAimSort, initAim } from './initial';\nimport { message } from 'antd';\nimport EditAim from './EditAim';\nimport EmptyStatus from '../../public/empty.png';\n\nconst Aim = ({ activeFile, onChange }) => {\n  // const initAims = initAim(moment());\n  // const [allAims, setAllAims] = useState(initAims);\n  // const { currentId = allAims.data[0].id, editId, data = [] } = allAims;\n  // const [currentAim] = data.filter((item) => item.id === currentId);\n  // // console.log('currentAim', initAims, currentAim);\n  // const changeCurrentAim = (aim) => {\n  //   const newDatas = data.filter((item) => item.id !== currentId);\n  //   newDatas.push({ ...aim, modifyTime: moment().valueOf() });\n  //   setAllAims({ ...allAims, editId: '', data: newDatas });\n  // };\n\n  // const addBranchTimes = (index) => {\n  //   const { data } = allAims;\n  //   const newData = data.map((item) => {\n  //     if (item.id === currentId) {\n  //       item.currentTimes += 1;\n  //       if (index >= 0) {\n  //         item.branchs[index].currentTimes += 1;\n  //       }\n  //     }\n  //     return item;\n  //   });\n\n  //   setAllAims({\n  //     ...allAims,\n  //     data: newData,\n  //   });\n  // };\n  // const onEditChange = (type, id, title) => {\n  //   if (type === EAimType.start) {\n  //     setAllAims({ ...allAims, editId: id });\n  //     return;\n  //   }\n  //   const { data } = allAims;\n  //   if (type === EAimType.delete) {\n  //     const newData = data.filter((item) => item.id !== id);\n  //     setAllAims({ ...allAims, data: newData });\n  //     return;\n  //   }\n  //   if (type === EAimType.top) {\n  //     const newData = data.map((item) => {\n  //       if (item.id === id) {\n  //         item.sort =\n  //           item.sort === EAimSort.top ? EAimSort.normal : EAimSort.top;\n  //         item.modifyTime = moment().valueOf();\n  //       }\n  //       return item;\n  //     });\n  //     setAllAims({ ...allAims, editId: '', data: newData });\n  //     return;\n  //   }\n  //   if (type === EAimType.rename) {\n  //     if (!title) {\n  //       message.error('标题不能为空');\n  //       return;\n  //     }\n  //     const newData = data.map((item) => {\n  //       if (item.id === id) {\n  //         item.title = title;\n  //         item.modifyTime = moment().valueOf();\n  //       }\n  //       return item;\n  //     });\n  //     setAllAims({ ...allAims, editId: '', data: newData });\n  //   }\n  // };\n\n  return (\n    <div className={styles.Aim}>\n      <div className={styles.content}>\n        <EditAim activeFile={activeFile} onSubmit={onChange} />\n        <AimList activeFile={activeFile} addBranchTimes={onChange} />\n      </div>\n    </div>\n  );\n};\nexport default Aim;\n","/Users/jacklee/Project/OpenSource/autonomy/src/todo/index.js",["251","252","253","254","255","256","257","258","259","260","261","262"],"import React, { useState, useCallback } from 'react';\nimport moment from 'moment';\nimport styles from './index.less';\nimport { IColumn, ITask, EStatus, ERate, ERepeat } from './initial';\nimport shortid from 'shortid';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport Column from '../components/Column';\nimport { Input, Rate, Form, Button, Menu } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { ITodo } from './initial';\nimport AddModal from './components/AddDrawer';\nimport useContextMenu from '../hooks/useContextMenu';\nimport { PlusCircleOutlined } from '@ant-design/icons';\n\nconst emptyString = ['undefined', 'null', ''];\n\nconst switchColumnTask = (todoData, source, destination) => {\n  console.log('******', source, destination);\n  const { columns } = todoData;\n  let task;\n  let targetColumnIndex;\n  const newColumns = columns.map((column, index) => {\n    if (column.id === source.droppableId) {\n      task = column.tasks[source.index];\n      column.tasks.splice(source.index, 1);\n    }\n    if (column.id === destination.droppableId) {\n      targetColumnIndex = index;\n    }\n    return column;\n  });\n  if ((targetColumnIndex || targetColumnIndex === 0) && task) {\n    if(destination.droppableId === 'column-inprogress'){\n      task.inprogressTime = Date.now();\n    }\n    if(destination.droppableId === 'column-done'){\n      task.finishTime = Date.now();\n    }\n    newColumns[targetColumnIndex].tasks.splice(destination.index, 0, task);\n  }\n  // console.log('xxxnewColumns', newColumns);\n  return { ...todoData, columns: newColumns };\n};\n\nconst deleteColumnTask = (todoData, source) => ({\n  ...todoData,\n  columns: todoData?.columns?.map((column) => {\n    if (column.id === source.droppableId) {\n      column.tasks.splice(source.index, 1);\n    }\n    return {\n      ...column,\n    };\n  }),\n});\nconst getTaskText = (task = {}) => {\n  return [\n    task.content,\n    task.desc,\n    task.items.map((item) => item.title).join('-'),\n    task.tags.join('-'),\n  ].join('-');\n};\n\nconst sortTaskByRate = (columns, searchFilter) =>\n  columns.map((column) => {\n    return {\n      ...column,\n      tasks: column.tasks\n        .filter((task) =>\n          getTaskText(task).includes(searchFilter[column.id] || '')\n        )\n        .sort((a, b) => b.rate - a.rate),\n    };\n  });\n\nconst defalutColumns = [\n  {\n    id: 'column-todo',\n    name: '代办',\n    tasks: [],\n  },\n  {\n    id: 'column-inprogress',\n    name: '进行中',\n    tasks: [],\n  },\n  {\n    id: 'column-done',\n    name: '已完成',\n    tasks: [],\n  },\n];\n\nconst TodoList = React.memo((props) => {\n  const { activeFile, onChange } = props;\n  const columns =\n    activeFile?.body?.length > 0 && !emptyString.includes(activeFile.body)\n      ? typeof activeFile?.body === 'string'\n        ? JSON.parse(activeFile.body)\n        : activeFile?.body\n      : [...defalutColumns];\n  const todoData = { ...activeFile, columns };\n  // const [taskRate, setTaskRate] = useState(ERate.zero);\n  // const [inputTask, setInputTask] = useState('');\n  // const [inputTaskDesc, setInputTaskDesc] = useState('');\n  const [taskRepeat, setTaskRepeat] = useState(ERepeat.once);\n  const [open, setOpen] = useState(false);\n  const [form] = Form.useForm();\n  const [modalColumnId, setModalColumnId] = useState();\n  const [searchFilter, setSearchFilter] = useState({});\n  const [sortType, setSortType] = useState('normal');\n\n  console.log('sortedColumns111', columns);\n  const clickItem = useContextMenu(\n    [\n      {\n        label: '编辑',\n        click: () => {\n          const { current } = clickItem;\n          if (current !== null) {\n            const task = JSON.parse(current.dataset.task);\n            console.log('task==', task);\n            setOpen(true);\n            setModalColumnId(current.dataset.columnid);\n            form.setFieldsValue({\n              id: task.id,\n              title: task.content,\n              desc: task.desc,\n              rate: task.rate,\n              items: task.items,\n              tags: task.tags,\n            });\n          }\n        },\n      },\n      {\n        label: '移至回收站',\n        click: () => {\n          const { current } = clickItem;\n          if (current !== null) {\n            const task = JSON.parse(current.dataset.task);\n            // console.log(\n            //   'xxx===>',\n            //   columns.map((column) => {\n            //     if (column.id === current.dataset.columnid) {\n            //       return {\n            //         ...column,\n            //         tasks: column.tasks.filter((item) => item.id !== task.id),\n            //       };\n            //     }\n            //     return column;\n            //   })\n            // );\n            handleDeleteTask(current.dataset.columnid, task.id);\n          }\n        },\n      },\n    ],\n    'context_menu_task',\n    [columns]\n  );\n\n  const handleDeleteTask = (columnId, taskId) => {\n    onChange(\n      todoData.id,\n      columns.map((column) => {\n        debugger;\n        if (column.id === columnId) {\n          return {\n            ...column,\n            tasks: column.tasks.filter((item) => item.id !== taskId),\n          };\n        }\n        return column;\n      }),\n      {},\n      true\n    );\n  };\n\n  const handleDragEnd = (result) => {\n    const { source, destination } = result;\n    if (!destination) {\n      // const { id, columns } = deleteColumnTask({ ...todoData }, source);\n      // onChange(id, columns);\n      return;\n    }\n    if (\n      source.droppableId === destination.droppableId &&\n      source.index === destination.index\n    ) {\n      return;\n    }\n    const { id, columns } = switchColumnTask(todoData, source, destination);\n    onChange(id, columns, {}, true);\n  };\n  const handleTaskEdit = (column, task) => {\n    setOpen(true);\n    setModalColumnId(column.id);\n    form.setFieldsValue({ ...task, title: task.content });\n  };\n  // const rate = (\n  //   <Rate\n  //     allowClear={false}\n  //     value={taskRate}\n  //     defaultValue={ERate.zero}\n  //     count={4}\n  //     tooltips={[\n  //       '不紧急不重要',\n  //       '不紧急很重要',\n  //       '很紧急不重要',\n  //       '很紧急很重要',\n  //     ]}\n  //     style={{ fontSize: 14, color: 'orangered' }}\n  //     onChange={setTaskRate}\n  //   />\n  // );\n  const handleAddTodo = (values) => {\n    const { id, title, desc, rate, items = [], tags = [] } = values;\n    if (!title) {\n      return;\n    }\n    const newTodo = {\n      id: id || shortid.generate(),\n      status: EStatus.todo,\n      content: title,\n      desc: desc,\n      rate: rate,\n      repeat: taskRepeat,\n      items,\n      tags,\n      createTime: Date.now()\n    };\n    onChange(\n      todoData.id,\n      columns.map((column) => {\n        if (column.id === modalColumnId) {\n          return {\n            ...column,\n            tasks: id\n              ? column.tasks.map((task) => {\n                  if (task.id === id) {\n                    return {\n                      ...task,\n                      ...newTodo,\n                      createTime: task.createTime || Date.now()\n                    };\n                  }\n                  return task;\n                })\n              : [newTodo, ...column.tasks],\n          };\n        }\n        return column;\n      }),\n      {},\n      true\n    );\n    // setInputTask('');\n    // setInputTaskDesc('');\n    // setTaskRate(ERate.zero);\n  };\n\n  const handleCheckLittleTask = (\n    columnItem,\n    taskItem,\n    little,\n    checked,\n    index\n  ) => {\n    onChange(\n      todoData.id,\n      columns.map((column) => {\n        if (column.id === columnItem.id) {\n          return {\n            ...column,\n            tasks: column.tasks.map((task) => {\n              if (task.id === taskItem.id) {\n                return {\n                  ...task,\n                  items: task.items.map((item) => {\n                    if (item.title === little.title) {\n                      return {\n                        ...item,\n                        checked,\n                        finishTime: checked? Date.now(): 0\n                      };\n                    }\n                    return item;\n                  }),\n                };\n              }\n              return task;\n            }),\n          };\n        }\n        return column;\n      }),\n      {},\n      true\n    );\n  };\n  // console.log('todo==', todoData, columns);\n  const sortedColumns = sortType === 'rate'?sortTaskByRate(columns, searchFilter): columns;\n  console.log('sortedColumns', sortedColumns, columns, searchFilter);\n  return (\n    <DragDropContext onDragEnd={handleDragEnd}>\n      {/* <div className={styles.title}>象限法则日程</div> */}\n      <div className={styles.Todo}>\n        <div className={styles.columns}>\n          {sortedColumns.map((column, index) => {\n            return (\n              <Column\n                key={column.id}\n                column={column}\n                onEditTask={handleTaskEdit}\n                onCheckLittleTask={handleCheckLittleTask}\n                actions={\n                  <>\n                    <Input\n                      placeholder={''}\n                      bordered={false}\n                      suffix={<SearchOutlined />}\n                      className={styles.search}\n                      onChange={(e) =>\n                        setSearchFilter({\n                          ...searchFilter,\n                          [column.id]: e.target.value,\n                        })\n                      }\n                    />\n                    <PlusCircleOutlined\n                      className={styles.add}\n                      onClick={() => {\n                        setOpen(true);\n                        setModalColumnId(column.id);\n                      }}\n                    />\n                  </>\n                }\n              />\n            );\n          })}\n        </div>\n        {open && (\n          <AddModal\n            form={form}\n            open={open}\n            closeModal={() => {\n              setOpen(false);\n            }}\n            handleAddTodo={handleAddTodo}\n          />\n        )}\n      </div>\n    </DragDropContext>\n  );\n});\n\nexport default TodoList;\n","/Users/jacklee/Project/OpenSource/autonomy/src/utils/antdIcons.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useKeyPressed.js",["263"],"import { useState, useEffect } from 'react';\n\nconst useKeyPressed = (targetKeyCode) => {\n  const [keyPressed, setKeyPressed] = useState(false);\n  useEffect(() => {\n    const keyDownHandler = ({ keyCode }) => {\n      if (keyCode === targetKeyCode) {\n        setKeyPressed(true);\n      }\n    };\n    const keyUpHandler = ({ keyCode }) => {\n      if (keyCode === targetKeyCode) {\n        setKeyPressed(false);\n      }\n    };\n    document.addEventListener('keyup', keyUpHandler);\n    document.addEventListener('keydown', keyDownHandler);\n    return () => {\n      document.removeEventListener('keyup', keyUpHandler);\n      document.removeEventListener('keydown', keyDownHandler);\n    };\n  }, []);\n  return keyPressed;\n};\n\nexport default useKeyPressed;\n","/Users/jacklee/Project/OpenSource/autonomy/src/todo/components/Report/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/hooks/useContextMenu.js",["264","265"],"import { useEffect, useRef } from 'react';\nimport { getParentNode } from '../utils/helper.js';\n// import nodejs modules\nconst { remote } = window.require('electron');\nconst { Menu, MenuItem } = remote;\n\nconst useContextMenu = (menus, targetClass, deps = []) => {\n  const clickElement = useRef(null);\n  useEffect(() => {\n    const menu = new Menu();\n    menus.forEach((item) => {\n      menu.append(new MenuItem(item));\n    });\n    const handleContextMenu = ({ target }) => {\n      // 只有 e.target被 target 包裹时才出现\n      // const targetEle = document.querySelector(target);\n      // if (targetEle && targetEle.contains(e.target)) {\n      //if (target.classList.contains(targetClass)) {\n      const parentNode = getParentNode(target, targetClass);\n      if (parentNode) {\n        clickElement.current = parentNode;\n        menu.popup({ window: remote.getCurrentWindow() });\n      }\n    };\n    window.addEventListener('contextmenu', handleContextMenu);\n    return () => {\n      window.removeEventListener('contextmenu', handleContextMenu);\n    };\n  }, [...deps]);\n  return clickElement;\n};\n\nexport default useContextMenu;\n","/Users/jacklee/Project/OpenSource/autonomy/src/note/index.jsx",["266","267"],"/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState} from 'react';\n\nimport styles from './index.less';\n// import { getSaveLocation } from '../utils/helper';\n// import Editor from '../components/CKEditor'; \nimport Editor from '../components/SlateEditor'; \n\n\nconst Note = ({ activeFile, onChange }) => {\n  const { id, body = '', isLoaded = false } = activeFile;\n  // const [activeId, setActiveId]=useState(id);\n  const [data, setData] = useState('');\n  const handleContentChange = (data) => {\n    if (data !== body) {\n      onChange(id, data);\n    }\n  };\n  // useEffect(() => {\n  //     setData(body);\n  // }, [id, isLoaded]);\n  console.log('idid',id, activeFile, data)\n  return (\n    <div className={styles.Note}>\n      {\n        body&&\n        <Editor key={id} id={id} value={body} onChange={handleContentChange} isLoaded={isLoaded}/>\n      }\n    </div>\n  );\n};\n\nexport default Note;\n","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/index.js",["268","269","270"],"import React, { useCallback, useEffect, useMemo } from 'react';\nimport {\n  Transforms,\n  createEditor,\n  Editor,\n  Element as SlateElement,\n  Node as SlateNode,\n  Text\n} from 'slate';\nimport { withHistory } from 'slate-history';\nimport { Editable, ReactEditor, Slate, withReact } from 'slate-react';\nimport withShortcuts from './formatter/shortcuts';\nimport withImages from './formatter/images';\nimport Toolbar from './components/Toolbar';\nimport isHotkey from 'is-hotkey';\nimport styles from './index.less';\nimport RenderElement, { RenderLeaf } from './formatter';\nimport { BlockButton, MarkButton } from './components/Button';\nimport { isBlockActive, toggleMark } from './formatter/utils';\nimport { DEFAULT_NOTE, HOTKEYS, SHORTCUTS } from './constant';\nimport ToolIcon from '../Icon';\nimport ColorPicker from './components/ColorPicker';\nimport InsertImage from './components/InsertImage';\nimport useDecorate from './hooks/useDecorate';\nimport SetNodeToDecorations from './components/SetNodeToDecorations';\nimport CodeBlockButton from './components/BlockCode/components/BlockCodeButton';\nimport { prismThemeCss } from './components/BlockCode/highlight.js';\nimport 'prismjs/components/prism-javascript'\nimport 'prismjs/components/prism-jsx'\nimport 'prismjs/components/prism-typescript'\nimport 'prismjs/components/prism-tsx'\nimport 'prismjs/components/prism-markdown'\nimport 'prismjs/components/prism-python'\nimport 'prismjs/components/prism-php'\nimport 'prismjs/components/prism-sql'\nimport 'prismjs/components/prism-java'\nimport { CodeBlockType, CodeLineType, languageTypes, ParagraphType } from './components/BlockCode/index.jsx';\n\nconst { clipboard } = require('electron')\n\nconst parseValue = (value) => {\n  if (Array.isArray(value)) {\n    return value;\n  }\n  if (typeof value === 'string') {\n    if (value.startsWith('[{') && value.endsWith('}]')) {\n      return JSON.parse(value);\n    }\n    return [\n      {\n        type: 'paragraph',\n        children: [\n          {\n            text: value,\n          },\n        ],\n      },\n    ];\n  }\n  return DEFAULT_NOTE;\n};\n\n// const initialValue = [\n//   {\n//     type: 'paragraph',\n//     children: [\n//       {\n//         text: '请输入markdown...',\n//       },\n//     ],\n//   },\n// ];\n//   // {\n//   //   type: 'block-quote',\n//   //   children: [{ text: 'A wise quote.', color: 'red' }],\n//   // },\n//   // {\n//   //   type: 'image',\n//   //   url: 'https://source.unsplash.com/kFrdX5IeQzI',\n//   //   children: [{ text: '' }],\n//   // },\n//   // {\n//   //   type: 'paragraph',\n//   //   children: [\n//   //     {\n//   //       text: 'Order when you start a line with \"## \" you get a level-two heading, like this:',\n//   //     },\n//   //   ],\n//   // },\n//   // {\n//   //   type: 'heading-two',\n//   //   children: [{ text: 'Try it out!' }],\n//   // },\n//   // {\n//   //   type: 'image',\n//   //   url: 'https://source.unsplash.com/zOwZKwZOZq8',\n//   //   children: [{ text: '' }],\n//   // },\n//   // {\n//   //   type: 'paragraph',\n//   //   textAlign: 'right',\n//   //   children: [\n//   //     {\n//   //       text: 'Try it out for yourself! Try starting a new line with \">\", \"-\", or \"#\"s.',\n//   //     },\n//   //   ],\n//   // },\n// ];\n\nconst SlateEditor = ({ id, page = 1, value, onChange, isLoaded }) => {\n  const renderElement = useCallback(RenderElement, []);\n  const renderLeaf = useCallback(RenderLeaf, []);\n  const editor = useMemo(\n    () => withShortcuts(withImages(withReact(withHistory(createEditor())))),\n    []\n  );\n\n  // useEffect(() => {\n  //   // editor.children = value;\n  // }, [editor, value]);\n\n  const handleEditableCopy=()=>{\n    // const selectedText = Editor.string(editor, editor.selection, {voids: true});\n    // SlateNode.texts(editor, editor.selection)\n    // console.log('selectedText====>22', editor, selectedText, editor.selection, editor.selection.anchor.path, editor.selection.focus.path);\n    // // 获取编辑器的值\n    // const value = editor.value;\n    \n    // // 如果没有选中的文本，直接返回空字符串\n    // if (value.isBlurred || editor.selection.isBlurred) {\n    //     return '';\n    // }\n\n    const { anchor, focus } = editor.selection;\n    let from = anchor.path;\n    let fromOffset = anchor.offset;\n    let to  = focus.path;\n    let toOffset = focus.offset;\n    if(from[0] > to[0]){\n      from = focus.path;\n      fromOffset = focus.offset;\n      to = anchor.path;\n      toOffset = anchor.offset;\n    }\n    const selectedText = Array.from(SlateNode.texts(editor, {from, to})).reduce((result, ite, index, list)=>{\n\n      const item = ite[0]\n      if(index === 0){\n        return item.text.slice(fromOffset)\n      }else if(index === list.length - 1){\n        console.log('item===', item)\n        return result + '\\n' + item.text.slice(0, toOffset)\n      }\n      return result + '\\n' + item.text;\n    },'')\n\n    // for (let number of SlateNode.texts(editor, {from, to})) {\n    //   console.log('----', number);\n    // }\n    // 获取选中的文本\n    // const selectedText2 = SlateNode.texts(editor, editor.selection).reduce((text, node) => {\n    //     console.log('=====>', node)\n    //     return text + node.text.split('\\n').join('\\n' + node.indent);\n    // }, '');\n\n    console.log('selectedText====>', editor, selectedText)\n    clipboard.writeText(selectedText)\n  }\n\n  const decorate = useDecorate(editor)\n\n  const handleSaveSelection = () => {\n    editor.savedSelection = editor.selection;\n  };\n\n  const handleEditablePaste =(e)=>{\n    console.log('paste=', e)\n  }\n\n  const handleEditableClick=(event)=>{\n    const lastNodeType = editor.children[editor.children.length - 1].type;\n    if(event.target.getAttribute('data-slate-editor')&&['code-block', 'image'].includes(lastNodeType)){\n      // // Editor.isNormalizing(editor)\n      Editor.insertNode(editor, {\n        type: 'paragraph',\n        children: [{ text: '' }],\n      })\n      if(['code-block'].includes(lastNodeType)){\n        Transforms.liftNodes(editor);\n      }\n    }\n  }\n\n  const handleDOMBeforeInput = useCallback(\n    (e) => {\n      queueMicrotask(() => {\n        const pendingDiffs = ReactEditor.androidPendingDiffs(editor);\n\n        const scheduleFlush = pendingDiffs?.some(({ diff, path }) => {\n          if (!diff.text.endsWith(' ')) {\n            return false;\n          }\n\n          const { text } = SlateNode.leaf(editor, path);\n          const beforeText = text.slice(0, diff.start) + diff.text.slice(0, -1);\n          console.log('handleDOMBeforeInput22', beforeText);\n          if (!(beforeText in SHORTCUTS)) {\n            return;\n          }\n\n          const blockEntry = Editor.above(editor, {\n            at: path,\n            match: (n) =>\n              SlateElement.isElement(n) && Editor.isBlock(editor, n),\n          });\n          if (!blockEntry) {\n            return false;\n          }\n\n          const [, blockPath] = blockEntry;\n          return Editor.isStart(editor, Editor.start(editor, path), blockPath);\n        });\n\n        if (scheduleFlush) {\n          ReactEditor.androidScheduleFlush(editor);\n        }\n      });\n    },\n    [editor]\n  );\n  console.log('SlateEditor', id, value);\n  return (\n    <Slate\n      key={id + '-' + page}\n      editor={editor}\n      initialValue={parseValue(value)}\n      // value={parseValue(value)}\n      onChange={(value) => {\n        const isAstChange = editor.operations.some(\n          (op) => 'set_selection' !== op.type\n        );\n        console.log('values==', value, isAstChange);\n        if (isAstChange) {\n          // Save the value to Local Storage.\n          // const content = JSON.stringify(value);\n          // localStorage.setItem('content', content);\n          onChange(value);\n        }\n      }}\n    >\n      <Toolbar className={styles.toolbar}>\n        <InsertImage />\n        <ColorPicker />\n        {/* <MarkButton format=\"code\" icon={<ToolIcon type=\"icon-editor-code\" />} /> */}\n        <CodeBlockButton />\n        <ToolIcon type=\"icon-editor-fengexian\" className={styles.fengexian}/>\n        <MarkButton\n          format=\"bold\"\n          icon={<ToolIcon type=\"icon-editor-fuhao-jiacu\" />}\n        />\n        <MarkButton\n          format=\"italic\"\n          icon={<ToolIcon type=\"icon-editor-italic\" />}\n        />\n        <MarkButton\n          format=\"underline\"\n          icon={<ToolIcon type=\"icon-editor-underline\" />}\n        />\n        <MarkButton\n          format=\"middleline\"\n          icon={<ToolIcon type=\"icon-editor-a-zhonghuaxian1\" />}\n        />\n        <ToolIcon type=\"icon-editor-fengexian\" className={styles.fengexian}/>\n        <BlockButton\n          format=\"heading-one\"\n          icon={<ToolIcon type=\"icon-editor-heading-h1\" />}\n        />\n        <BlockButton\n          format=\"heading-two\"\n          icon={<ToolIcon type=\"icon-editor-heading-h2\" />}\n        />\n        <BlockButton\n          format=\"heading-three\"\n          icon={<ToolIcon type=\"icon-editor-heading-h3\" />}\n        />\n        <BlockButton\n          format=\"heading-four\"\n          icon={<ToolIcon type=\"icon-editor-heading-h4\" />}\n        />\n        <BlockButton\n          format=\"heading-five\"\n          icon={<ToolIcon type=\"icon-editor-heading-h5\" />}\n        />\n         <BlockButton\n          format=\"heading-six\"\n          icon={<ToolIcon type=\"icon-editor-heading-h6\" />}\n        />\n        <ToolIcon type=\"icon-editor-fengexian\" className={styles.fengexian}/>\n        <BlockButton\n          format=\"check-list\"\n          icon={<ToolIcon type=\"icon-editor-checkbox-checked\" />}\n        />\n        <BlockButton\n          format=\"block-quote\"\n          icon={<ToolIcon type=\"icon-editor-text_quote\" />}\n        />\n        <BlockButton\n          format=\"numbered-list\"\n          icon={<ToolIcon type=\"icon-editor-format_list_numbered\" />}\n        />\n        <BlockButton\n          format=\"bulleted-list\"\n          icon={<ToolIcon type=\"icon-editor-format-list-bulleted\" />}\n        />\n        <ToolIcon type=\"icon-editor-fengexian\" className={styles.fengexian}/>\n        <BlockButton\n          format=\"center\"\n          icon={<ToolIcon type=\"icon-editor-align-center\" />}\n        />\n        <BlockButton\n          format=\"right\"\n          icon={<ToolIcon type=\"icon-editor-align-right\" />}\n        />\n        <BlockButton\n          format=\"left\"\n          icon={<ToolIcon type=\"icon-editor-align-left\" />}\n        />\n        <BlockButton\n          format=\"justify\"\n          icon={<ToolIcon type=\"icon-editor-align-justify\" />}\n        />\n      </Toolbar>\n      <SetNodeToDecorations />\n      <Editable\n        className={styles.slate_editor}\n        decorate={decorate}\n        onDOMBeforeInput={handleDOMBeforeInput}\n        renderElement={renderElement}\n        renderLeaf={renderLeaf}\n        onClick={handleEditableClick}\n        onCopy={handleEditableCopy}\n        onPaste={handleEditablePaste}\n        onKeyDown={(event) => {\n          \n          if (isHotkey('tab', event)) {\n            event.preventDefault();\n            Editor.insertText(editor, '  ')\n          }\n          if (isHotkey('mod+a', event)) {\n            event.preventDefault();\n            Transforms.select(editor, []);\n          }\n          console.log('event==>', event, event.metaKey&&event.code === 'Enter', event.ctrlKey && event.key ==='q')\n          if(event.ctrlKey&&event.key === '`'){\n            event.preventDefault();\n            if(isBlockActive(editor, 'code-block')){\n              Transforms.unwrapNodes(editor, {\n                match: (n) =>\n                  !Editor.isEditor(n) &&\n                  SlateElement.isElement(n) &&\n                  n.type === 'code-block',\n              });\n              Transforms.setNodes(\n                editor,\n                { type: ParagraphType }\n              )\n            }else{\n              Transforms.wrapNodes(\n                editor,\n                { type: CodeBlockType, language: 'html', children: [] },\n                {\n                  match: n => SlateElement.isElement(n) && n.type === ParagraphType,\n                  split: true,\n                }\n              )\n              Transforms.setNodes(\n                editor,\n                { type: CodeLineType, children: [{text: \"\"}] },\n                { match: n => SlateElement.isElement(n) && n.type === ParagraphType }\n              )\n            }\n            return;\n          }\n          if(event.metaKey && event.key ==='Enter'){\n            event.preventDefault();\n            // let nextsilbingNode;\n            // for(let node of Editor.levels(\n            //   editor,\n            //   {\n            //     match:n=>!Editor.isEditor(n)&&n.type === 'code-block' ? true : false, \n            //     reverse:true\n            //   }\n            // )){\n            //   nextsilbingNode = Editor.next(editor,{at:node[1]})\n            // }\n            // console.log('=====', nextsilbingNode);\n            // if(nextsilbingNode){\n            //   Transforms.select(editor, nextsilbingNode[1])\n            //   Transforms.collapse(editor, {fedge:'end'})\n            // }else{\n              // Transforms.collapse(editor, {fedge:'end'})\n              Editor.insertNode(editor, {\n                type: 'paragraph',\n                children: [{ text: '' }],\n              })\n              // 将光标移动到编辑器末尾\n              // Transforms.moveToEnd(editor);?\n              // Transforms.collapse(editor, {fedge:'end'})\n              Transforms.liftNodes(editor);\n              // 插入新块\n              // Transforms.insertNodes(editor, {\n              //   type: 'paragraph',\n              //   children: [{ text: '' }],\n              // });\n              // Transforms.setNodes(editor, {type:'paragraph'})\n            // }\n          }else if(event.key ==='Enter') {\n            // const textBeforeCursor = Editor.before(editor, editor.selection.anchor, { unit: 'block' });\n            // const start = Editor.start(editor, textBeforeCursor.path);\n            const range = { anchor: editor.selection.anchor, focus:{ ...editor.selection.focus, offset: 0} };\n            const beforeText = Editor.string(editor, range)\n            const codePrefix = beforeText.startsWith('```')? languageTypes[beforeText.replace('```','')||'html']: '';\n            // 获取当前选区中的块级节点\n            // const [ node ] = Editor.nodes(editor, {\n            //   match: (n) => Editor.isBlock(editor, n),\n            //   mode: 'all',\n            // });\n            // const [match] = Editor.nodes(editor, {\n            //   match: n => n.type === 'code-block',\n            // })\n            // Range.isCollapsed(range),\n            console.log('node===>', codePrefix, Editor.isStart(editor, editor.selection))\n            if(codePrefix){\n              event.preventDefault();\n              Transforms.insertText(editor, '', {at: range})\n              if(isBlockActive(editor, 'code-block')){\n                Transforms.liftNodes(editor);\n                Transforms.setNodes(editor, {type:'paragraph'})\n                return;\n              }\n              Transforms.wrapNodes(\n                editor,\n                { type: CodeBlockType, language: codePrefix, children: [] },\n                {\n                  match: n => SlateElement.isElement(n) && n.type === ParagraphType,\n                  split: true,\n                }\n              )\n              Transforms.setNodes(\n                editor,\n                { type: CodeLineType, children: [{text: \"\"}] },\n                { match: n => SlateElement.isElement(n) && n.type === ParagraphType }\n              )\n            }\n          }\n          for (const hotkey in HOTKEYS) {\n            if (isHotkey(hotkey, event)) {\n              event.preventDefault();\n              const mark = HOTKEYS[hotkey];\n              toggleMark(editor, mark);\n            }\n          }\n        }}\n        placeholder={\n          <span style={{display: 'inline-block', marginTop: 12 }}>\n            写点什么...\n          </span>\n        }\n        spellCheck\n        autoFocus\n        onBlur={handleSaveSelection}\n      />\n      <style>{prismThemeCss}</style>\n    </Slate>\n  );\n};\n\nexport default SlateEditor;\n","/Users/jacklee/Project/OpenSource/autonomy/src/aim/initial.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/todo/initial.js",["271","272"],"import shortid from 'shortid';\nimport moment from 'moment';\n\nexport const ERepeat = {\n  once: 0,\n  everyday: 1,\n  weekly: 2,\n};\n\nexport const ERate = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  three: 3,\n  four: 4,\n};\n\nexport const EStatus = {\n  todo: 0,\n  doing: 1,\n  done: 2,\n};\n\nexport const ESort = {\n  top: 1,\n  normal: 2,\n};\n\nexport const newTodo = (momentFn, id) => {\n  // console.log('momentFn', momentFn, id);\n  const curTime = momentFn.valueOf();\n  return {\n    id,\n    title: momentFn.format('YYYYMMDD'),\n    createTime: curTime,\n    modifyTime: curTime,\n    sort: ESort.normal,\n    columns: [\n      {\n        id: 'column-todo',\n        name: '代办',\n        tasks: [],\n      },\n      {\n        id: 'column-inprogress',\n        name: '进行中',\n        tasks: [],\n      },\n      {\n        id: 'column-done',\n        name: '已完成',\n        tasks: [],\n      },\n    ],\n  };\n};\n\nexport const initTodo = (newTodo, newId) => {\n  return {\n    currentId: newId,\n    editId: '',\n    data: [newTodo],\n  };\n};\n","/Users/jacklee/Project/OpenSource/autonomy/src/aim/EditAim.js",["273","274","275","276"],"import React, { useState, useEffect, ChangeEvent } from 'react';\nimport { Input, Button, Select, DatePicker, InputNumber } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport styles from './index.less';\nimport shortid from 'shortid';\nimport { EAimType } from './initial';\n\nconst EditAim = (props) => {\n  const { activeFile, onSubmit } = props || {};\n  const data =\n    typeof activeFile?.body === 'string' && activeFile?.body.length > 0\n      ? JSON.parse(activeFile.body)\n      : { branchs: [] };\n  const [isEditing, setIsEditing] = useState(false);\n  // const [title, setTitle] = useState(activeFile.title || '');\n  const [desc, setDesc] = useState(data.desc || '');\n  const [times, setTimes] = useState(data.times || 0);\n  const [startDate, setStartDate] = useState(\n    data.startDate || moment().format('YYYYMMDD')\n  );\n  const [branchs, setBranchs] = useState(\n    data.branchs || [{ id: shortid.generate(), name: '' }]\n  );\n  useEffect(() => {\n    setDesc(data.desc || '');\n    setTimes(data.times || 0);\n    setStartDate(data.startDate || moment().format('YYYYMMDD'));\n    setBranchs(data.branchs || []);\n  }, [activeFile.id, activeFile.isLoaded]);\n\n  const handleAddBranch = () => {\n    branchs?.push({\n      id: shortid.generate(),\n      name: '',\n      desc: '',\n      times: 0,\n      currentTimes: 0,\n    });\n    setBranchs([...branchs]);\n    if (branchs.length === 1) {\n      setTimes(0);\n    }\n  };\n\n  const handleSubmit = () => {\n    onSubmit(activeFile.id, {\n      ...data,\n      desc,\n      times,\n      startDate,\n      branchs,\n    });\n    setIsEditing(false);\n  };\n  const handleBranchChange = (key, e, index) => {\n    let newBranchs = [...branchs];\n    newBranchs[index][key] = e.target.value;\n    setBranchs(newBranchs);\n  };\n  const setBranchTimes = (num, index) => {\n    let newBranchs = [...branchs];\n    // console.log(\n    //   'xxxtimes',\n    //   times,\n    //   newBranchs[index],\n    //   newBranchs[index].times,\n    //   num,\n    //   times - newBranchs[index].times + num\n    // );\n    setTimes(times - (newBranchs[index].times || 0) + num);\n    newBranchs[index].times = num;\n    setBranchs(newBranchs);\n  };\n  // console.log(\n  //   'editAim',\n  //   activeFile,\n  //   data,\n  //   startDate,\n  //   data.startDate || moment().format('YYYYMMDD')\n  // );\n  // const isEditing = data.id === editId;\n  return (\n    <div className={styles.EditAim}>\n      <div className={styles.formItem}>\n        <span className={styles.label}>目标名称：</span>\n        {/* {isEditing ? (\n          <Input\n            onChange={(e) => setTitle(e.target.value)}\n            value={title}\n            style={{ width: '60%' }}\n            placeholder=\"请输入目标名称\"\n          />\n        ) : ( */}\n        <div className={styles.aimTitle}>\n          <span>{activeFile.title}</span>\n          <Button\n            disabled={isEditing}\n            type=\"text\"\n            onClick={() => setIsEditing(true)}\n          >\n            编辑\n          </Button>\n        </div>\n        {/* )} */}\n      </div>\n      {(isEditing || desc?.length > 0) && (\n        <div className={styles.formItem}>\n          <span className={styles.label}>描述：</span>\n          {isEditing ? (\n            <Input.TextArea\n              rows={2}\n              onChange={(e) => setDesc(e.target.value)}\n              value={desc}\n              style={{ width: '60%' }}\n              placeholder=\"请输入目标描述\"\n            />\n          ) : (\n            <div style={{ width: '60%', wordWrap: 'break-word' }}>{desc}</div>\n          )}\n        </div>\n      )}\n\n      {branchs?.map((branch, index) => {\n        if (!branch) return null;\n        if (!isEditing && !branch.name) return null;\n        return (\n          <div key={branch.id}>\n            <div className={styles.formItem}>\n              <span className={styles.label}>分支{index + 1}：</span>\n              {isEditing ? (\n                <div className={styles.branchTitle}>\n                  <Input\n                    value={branch.name}\n                    onChange={(e) => handleBranchChange('name', e, index)}\n                    placeholder=\"请输入分支名\"\n                  />\n                  <div className={styles.branchTimes}>\n                    <InputNumber\n                      placeholder=\"打卡次数\"\n                      style={{ flex: 1, margin: '0 6px' }}\n                      min={0}\n                      value={branch.times}\n                      onChange={(val) => setBranchTimes(Number(val), index)}\n                    />\n                    次打卡\n                  </div>\n                </div>\n              ) : (\n                <div className={styles.branchTitle}>\n                  {branch.name}\n                  <span>{branch.times}次打卡</span>\n                </div>\n              )}\n            </div>\n            {(isEditing || branch?.desc?.length > 0) && (\n              <div className={styles.formItem}>\n                <span className={styles.label}></span>\n                {isEditing ? (\n                  <Input.TextArea\n                    value={branch.desc}\n                    onChange={(e) => handleBranchChange('desc', e, index)}\n                    rows={2}\n                    style={{ width: '60%' }}\n                    placeholder=\"请输入分支描述\"\n                  />\n                ) : (\n                  <div style={{ width: '60%' }}>{branch.desc}</div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n      {isEditing && (\n        <div className={styles.formItem}>\n          <span className={styles.label}></span>\n          <Button\n            type=\"dashed\"\n            style={{ width: '60%' }}\n            onClick={handleAddBranch}\n          >\n            <PlusOutlined /> 添加分支\n          </Button>\n        </div>\n      )}\n\n      <div className={styles.formItem}>\n        <span className={styles.label}>开始时间：</span>\n        <div className={styles.dateTimes} style={{ width: '60%' }}>\n          <div style={{ flex: 1 }}>\n            {isEditing ? (\n              <DatePicker\n                value={moment(startDate)}\n                onChange={(date) =>\n                  setStartDate(moment(date).format('YYYYMMDD'))\n                }\n                placeholder=\"开始时间\"\n                style={{ width: 280 }}\n              />\n            ) : (\n              <div>{startDate}</div>\n            )}\n          </div>\n          <div className={styles.times}>\n            <span className={styles.label}>总投入：</span>\n            {isEditing ? (\n              <InputNumber\n                disabled={branchs?.length > 0}\n                style={{ flex: 1, marginRight: 4 }}\n                min={0}\n                value={times}\n                onChange={(val) => setTimes(Number(val))}\n              />\n            ) : (\n              <span style={{ color: 'red', marginRight: 4 }}>{times}</span>\n            )}\n            次打卡\n          </div>\n        </div>\n      </div>\n      {isEditing && (\n        <div className={styles.formItem}>\n          <span className={styles.label}></span>\n          <div style={{ width: '60%', textAlign: 'left' }}>\n            <Button\n              type=\"primary\"\n              style={{ width: 180 }}\n              onClick={handleSubmit}\n            >\n              保存\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EditAim;\n","/Users/jacklee/Project/OpenSource/autonomy/src/components/Column.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/aim/AimList.js",["277"],"import React from 'react';\nimport { Card, Progress } from 'antd';\nimport { LikeOutlined } from '@ant-design/icons';\n\nimport styles from './index.less';\n\nconst AimList = (props) => {\n  const { activeFile, addBranchTimes } = props || {};\n  const data =\n    typeof activeFile?.body === 'string' && activeFile?.body.length > 0\n      ? JSON.parse(activeFile.body)\n      : { branchs: [] };\n\n  const { title, desc, branchs = [], times = 0, currentTimes = 0 } = data;\n  // console.log('aimlist', data, branchs);\n\n  const handleTimesChagne = (index) => {\n    const newBranchs = [...branchs];\n    let dataCurrentTimes = data?.currentTimes;\n    if (index >= 0) {\n      if ((newBranchs[index]?.currentTimes || 0) < newBranchs[index]?.times) {\n        newBranchs[index].currentTimes += 1;\n        dataCurrentTimes = (data.currentTimes || 0) + 1;\n      }\n    } else {\n      if ((data?.currentTimes || 0) < data?.times) {\n        dataCurrentTimes = (data.currentTimes || 0) + 1;\n      }\n    }\n    addBranchTimes(activeFile.id, {\n      ...data,\n      currentTimes: dataCurrentTimes,\n      branchs: newBranchs,\n    });\n  };\n\n  return (\n    <div className={styles.AimList}>\n      <Card\n        style={{ background: '#e6f7ff' }}\n        actions={\n          branchs.length < 1\n            ? [\n                <span onClick={() => handleTimesChagne(-1)}>\n                  <LikeOutlined key=\"times\" style={{ marginRight: 4 }} />\n                  {currentTimes}\n                </span>,\n              ]\n            : [\n                <Progress\n                  style={{ width: '90%', margin: '0 18px' }}\n                  percent={Math.floor((currentTimes / times) * 100)}\n                />,\n              ]\n        }\n      >\n        <div className={styles.item}>\n          <Progress\n            percent={Math.floor((currentTimes / times) * 100)}\n            width={60}\n            type=\"circle\"\n            format={() => '总'}\n          />\n          <div className={styles.titleDes}>\n            <div className={styles.title}>{activeFile.title}</div>\n            <div className={styles.desc}>{desc}</div>\n          </div>\n        </div>\n      </Card>\n      {branchs.map((branch, index) => {\n        if (!branch) return null;\n        return (\n          <Card\n            style={{ marginTop: 12 }}\n            key={branch.id}\n            actions={[\n              <span onClick={() => handleTimesChagne(index)}>\n                <LikeOutlined key=\"times\" style={{ marginRight: 4 }} />\n                {branch.currentTimes}\n              </span>,\n            ]}\n          >\n            <div className={styles.item}>\n              <Progress\n                percent={Math.floor((branch.currentTimes / branch.times) * 100)}\n                width={60}\n                type=\"circle\"\n              />\n              <div className={styles.titleDes}>\n                <div className={styles.branchTitle}>{branch.name}</div>\n                <div className={styles.desc}>{branch.desc}</div>\n              </div>\n            </div>\n          </Card>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default AimList;\n","/Users/jacklee/Project/OpenSource/autonomy/src/todo/components/AddDrawer/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/Task.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SmallRate.jsx",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/DynamicTags/index.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/InsertImage.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Button.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/Icon.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Toolbar.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/utils.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/images.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/shortcuts.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/ColorPicker/index.js",["278"],"'use strict';\n\nimport React, { useState } from 'react';\nimport { ChromePicker } from 'react-color';\nimport EditorIcon from '../../../Icon';\nimport { Editor } from 'slate';\nimport styles from './index.less';\nimport { useSlate } from 'slate-react';\n\nconst popover = {\n  position: 'absolute',\n  zIndex: '2',\n};\nconst cover = {\n  position: 'fixed',\n  top: '0px',\n  right: '0px',\n  bottom: '0px',\n  left: '0px',\n};\n\nfunction ColorPicker() {\n  const editor = useSlate();\n  const [visible, setVisible] = useState(false);\n  const [color, setColor] = useState({ hex: '#520520' });\n\n  const handleChange = (color, event) => {\n    setColor(color);\n    Editor.addMark(editor, 'color', color.hex);\n  };\n\n  const handleOpenColorPicker = () => {\n    setVisible(true);\n  };\n\n  const handleClose = () => {\n    setVisible(false);\n  };\n\n  return (\n    <span>\n      <EditorIcon\n        type=\"icon-editor-text-color\"\n        onClick={handleOpenColorPicker}\n        style={{ userSelect: 'none', color: '#aaaaaa' }}\n      />\n      {visible ? (\n        <div className={styles.chrome_picker} style={popover}>\n          <div style={cover} onClick={handleClose} />\n          <ChromePicker color={color} onChange={handleChange} />\n        </div>\n      ) : null}\n    </span>\n  );\n}\n\nexport default ColorPicker;\n","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Menu.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/formatter/index.jsx",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/CheckList.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/hooks/useDecorate.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/index.jsx",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/SetNodeToDecorations.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/components/BlockCodeButton.jsx",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/Icon.js",[],"/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/utils/normalize-tokens.js",["279"],"/**\n * Copied from prism-react-renderer repo\n * https://github.com/FormidableLabs/prism-react-renderer/blob/master/src/utils/normalizeTokens.js\n * */\n\nimport Prism from 'prismjs'\n\n\nconst newlineRe = /\\r\\n|\\r|\\n/\n\n// Empty lines need to contain a single empty token, denoted with { empty: true }\nconst normalizeEmptyLines = (line) => {\n  if (line.length === 0) {\n    line.push({\n      types: ['plain'],\n      content: '\\n',\n      empty: true,\n    })\n  } else if (line.length === 1 && line[0].content === '') {\n    line[0].content = '\\n'\n    line[0].empty = true\n  }\n}\n\nconst appendTypes = (types, add) => {\n  const typesSize = types.length\n  if (typesSize > 0 && types[typesSize - 1] === add) {\n    return types\n  }\n\n  return types.concat(add)\n}\n\n// Takes an array of Prism's tokens and groups them by line, turning plain\n// strings into tokens as well. Tokens can become recursive in some cases,\n// which means that their types are concatenated. Plain-string tokens however\n// are always of type \"plain\".\n// This is not recursive to avoid exceeding the call-stack limit, since it's unclear\n// how nested Prism's tokens can become\nexport const normalizeTokens = (\n  tokens\n) => {\n  const typeArrStack = [[]]\n  const tokenArrStack = [tokens]\n  const tokenArrIndexStack = [0]\n  const tokenArrSizeStack = [tokens.length]\n\n  let i = 0\n  let stackIndex = 0\n  let currentLine = []\n\n  const acc = [currentLine]\n\n  while (stackIndex > -1) {\n    while (\n      (i = tokenArrIndexStack[stackIndex]++) < tokenArrSizeStack[stackIndex]\n    ) {\n      let content\n      let types = typeArrStack[stackIndex]\n\n      const tokenArr = tokenArrStack[stackIndex]\n      const token = tokenArr[i]\n\n      // Determine content and append type to types if necessary\n      if (typeof token === 'string') {\n        types = stackIndex > 0 ? types : ['plain']\n        content = token\n      } else {\n        types = appendTypes(types, token.type)\n        if (token.alias) {\n          types = appendTypes(types, token.alias)\n        }\n\n        content = token.content\n      }\n\n      // If token.content is an array, increase the stack depth and repeat this while-loop\n      if (typeof content !== 'string') {\n        stackIndex++\n        typeArrStack.push(types)\n        tokenArrStack.push(content)\n        tokenArrIndexStack.push(0)\n        tokenArrSizeStack.push(content.length)\n        continue\n      }\n\n      // Split by newlines\n      const splitByNewlines = content.split(newlineRe)\n      const newlineCount = splitByNewlines.length\n\n      currentLine.push({ types, content: splitByNewlines[0] })\n\n      // Create a new line for each string on a new line\n      for (let i = 1; i < newlineCount; i++) {\n        normalizeEmptyLines(currentLine)\n        acc.push((currentLine = []))\n        currentLine.push({ types, content: splitByNewlines[i] })\n      }\n    }\n\n    // Decreate the stack depth\n    stackIndex--\n    typeArrStack.pop()\n    tokenArrStack.pop()\n    tokenArrIndexStack.pop()\n    tokenArrSizeStack.pop()\n  }\n\n  normalizeEmptyLines(currentLine)\n  return acc\n}","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/components/LanguageSelect.jsx",["280"],"import { css } from '@emotion/css'\n\nconst LanguageSelect = (props) => {\n  return (\n    <select\n      data-test-id=\"language-select\"\n      contentEditable={false}\n      {...props}\n    >\n      <option value=\"css\">CSS</option>\n      <option value=\"html\">HTML</option>\n      <option value=\"java\">Java</option>\n      <option value=\"javascript\">JavaScript</option>\n      <option value=\"jsx\">JSX</option>\n      <option value=\"markdown\">Markdown</option>\n      <option value=\"php\">PHP</option>\n      <option value=\"python\">Python</option>\n      <option value=\"sql\">SQL</option>\n      <option value=\"tsx\">TSX</option>\n      <option value=\"typescript\">TypeScript</option>\n    </select>\n  )\n}\n\nexport default LanguageSelect;","/Users/jacklee/Project/OpenSource/autonomy/src/components/SlateEditor/components/BlockCode/highlight.js",[],{"ruleId":"281","replacedBy":"282"},{"ruleId":"283","replacedBy":"284"},{"ruleId":"285","severity":1,"message":"286","line":9,"column":10,"nodeType":"287","messageId":"288","endLine":9,"endColumn":24},{"ruleId":"285","severity":1,"message":"289","line":9,"column":26,"nodeType":"287","messageId":"288","endLine":9,"endColumn":34},{"ruleId":"285","severity":1,"message":"290","line":13,"column":3,"nodeType":"287","messageId":"288","endLine":13,"endColumn":15},{"ruleId":"285","severity":1,"message":"291","line":14,"column":3,"nodeType":"287","messageId":"288","endLine":14,"endColumn":17},{"ruleId":"285","severity":1,"message":"292","line":44,"column":7,"nodeType":"287","messageId":"288","endLine":44,"endColumn":9},{"ruleId":"285","severity":1,"message":"293","line":59,"column":7,"nodeType":"287","messageId":"288","endLine":59,"endColumn":18},{"ruleId":"294","severity":1,"message":"295","line":104,"column":6,"nodeType":"296","endLine":104,"endColumn":8,"suggestions":"297"},{"ruleId":"285","severity":1,"message":"298","line":13,"column":19,"nodeType":"287","messageId":"288","endLine":13,"endColumn":23},{"ruleId":"299","severity":1,"message":"300","line":56,"column":17,"nodeType":"301","messageId":"302","endLine":56,"endColumn":19},{"ruleId":"285","severity":1,"message":"303","line":5,"column":9,"nodeType":"287","messageId":"288","endLine":5,"endColumn":16},{"ruleId":"285","severity":1,"message":"304","line":6,"column":5,"nodeType":"287","messageId":"288","endLine":6,"endColumn":13},{"ruleId":"285","severity":1,"message":"305","line":1,"column":17,"nodeType":"287","messageId":"288","endLine":1,"endColumn":25},{"ruleId":"285","severity":1,"message":"306","line":3,"column":8,"nodeType":"287","messageId":"288","endLine":3,"endColumn":14},{"ruleId":"285","severity":1,"message":"307","line":6,"column":10,"nodeType":"287","messageId":"288","endLine":6,"endColumn":18},{"ruleId":"285","severity":1,"message":"308","line":6,"column":20,"nodeType":"287","messageId":"288","endLine":6,"endColumn":28},{"ruleId":"285","severity":1,"message":"309","line":6,"column":30,"nodeType":"287","messageId":"288","endLine":6,"endColumn":37},{"ruleId":"285","severity":1,"message":"310","line":7,"column":10,"nodeType":"287","messageId":"288","endLine":7,"endColumn":17},{"ruleId":"285","severity":1,"message":"311","line":9,"column":8,"nodeType":"287","messageId":"288","endLine":9,"endColumn":19},{"ruleId":"285","severity":1,"message":"312","line":1,"column":27,"nodeType":"287","messageId":"288","endLine":1,"endColumn":38},{"ruleId":"285","severity":1,"message":"306","line":2,"column":8,"nodeType":"287","messageId":"288","endLine":2,"endColumn":14},{"ruleId":"285","severity":1,"message":"313","line":4,"column":10,"nodeType":"287","messageId":"288","endLine":4,"endColumn":17},{"ruleId":"285","severity":1,"message":"314","line":4,"column":19,"nodeType":"287","messageId":"288","endLine":4,"endColumn":24},{"ruleId":"285","severity":1,"message":"315","line":4,"column":35,"nodeType":"287","messageId":"288","endLine":4,"endColumn":40},{"ruleId":"285","severity":1,"message":"316","line":8,"column":17,"nodeType":"287","messageId":"288","endLine":8,"endColumn":21},{"ruleId":"285","severity":1,"message":"317","line":8,"column":29,"nodeType":"287","messageId":"288","endLine":8,"endColumn":35},{"ruleId":"285","severity":1,"message":"318","line":8,"column":37,"nodeType":"287","messageId":"288","endLine":8,"endColumn":41},{"ruleId":"285","severity":1,"message":"319","line":10,"column":10,"nodeType":"287","messageId":"288","endLine":10,"endColumn":15},{"ruleId":"285","severity":1,"message":"320","line":45,"column":7,"nodeType":"287","messageId":"288","endLine":45,"endColumn":23},{"ruleId":"285","severity":1,"message":"321","line":107,"column":22,"nodeType":"287","messageId":"288","endLine":107,"endColumn":35},{"ruleId":"285","severity":1,"message":"322","line":112,"column":20,"nodeType":"287","messageId":"288","endLine":112,"endColumn":31},{"ruleId":"294","severity":1,"message":"323","line":22,"column":6,"nodeType":"296","endLine":22,"endColumn":8,"suggestions":"324"},{"ruleId":"294","severity":1,"message":"325","line":29,"column":6,"nodeType":"296","endLine":29,"endColumn":15,"suggestions":"326"},{"ruleId":"294","severity":1,"message":"327","line":29,"column":7,"nodeType":"328","endLine":29,"endColumn":14},{"ruleId":"285","severity":1,"message":"329","line":2,"column":17,"nodeType":"287","messageId":"288","endLine":2,"endColumn":26},{"ruleId":"285","severity":1,"message":"330","line":13,"column":16,"nodeType":"287","messageId":"288","endLine":13,"endColumn":23},{"ruleId":"285","severity":1,"message":"329","line":1,"column":30,"nodeType":"287","messageId":"288","endLine":1,"endColumn":39},{"ruleId":"285","severity":1,"message":"331","line":8,"column":3,"nodeType":"287","messageId":"288","endLine":8,"endColumn":7},{"ruleId":"299","severity":1,"message":"332","line":208,"column":13,"nodeType":"333","messageId":"334","endLine":208,"endColumn":20},{"ruleId":"285","severity":1,"message":"335","line":1,"column":8,"nodeType":"287","messageId":"288","endLine":1,"endColumn":15},{"ruleId":"285","severity":1,"message":"306","line":2,"column":8,"nodeType":"287","messageId":"288","endLine":2,"endColumn":14},{"ruleId":"285","severity":1,"message":"336","line":1,"column":38,"nodeType":"287","messageId":"288","endLine":1,"endColumn":49},{"ruleId":"285","severity":1,"message":"337","line":2,"column":25,"nodeType":"287","messageId":"288","endLine":2,"endColumn":31},{"ruleId":"285","severity":1,"message":"307","line":7,"column":10,"nodeType":"287","messageId":"288","endLine":7,"endColumn":18},{"ruleId":"294","severity":1,"message":"338","line":30,"column":6,"nodeType":"296","endLine":30,"endColumn":42,"suggestions":"339"},{"ruleId":"285","severity":1,"message":"340","line":14,"column":11,"nodeType":"287","messageId":"288","endLine":14,"endColumn":16},{"ruleId":"341","severity":1,"message":"342","line":1,"column":1,"nodeType":"343","messageId":"344","endLine":1,"endColumn":14,"fix":"345"},{"ruleId":"285","severity":1,"message":"346","line":6,"column":8,"nodeType":"287","messageId":"288","endLine":6,"endColumn":13},{"ruleId":"285","severity":1,"message":"347","line":1,"column":10,"nodeType":"287","messageId":"288","endLine":1,"endColumn":13},"no-native-reassign",["348"],"no-negated-in-lhs",["349"],"no-unused-vars","'ConfigProvider' is defined but never used.","Identifier","unusedVar","'Dropdown' is defined but never used.","'initAllFiles' is defined but never used.","'importChildren' is defined but never used.","'fs' is assigned a value but never used.","'reportTypes' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'activeFile', 'activeFileId', and 'openClickedFile'. Either include them or remove the dependency array.","ArrayExpression",["350"],"'path' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","'TabPane' is assigned a value but never used.","'location' is assigned a value but never used.","'useState' is defined but never used.","'moment' is defined but never used.","'EAimType' is defined but never used.","'EAimSort' is defined but never used.","'initAim' is defined but never used.","'message' is defined but never used.","'EmptyStatus' is defined but never used.","'useCallback' is defined but never used.","'IColumn' is defined but never used.","'ITask' is defined but never used.","'ERate' is defined but never used.","'Rate' is defined but never used.","'Button' is defined but never used.","'Menu' is defined but never used.","'ITodo' is defined but never used.","'deleteColumnTask' is assigned a value but never used.","'setTaskRepeat' is assigned a value but never used.","'setSortType' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'targetKeyCode'. Either include it or remove the dependency array.",["351"],"React Hook useEffect has missing dependencies: 'menus' and 'targetClass'. Either include them or remove the dependency array.",["352"],"React Hook useEffect has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","SpreadElement","'useEffect' is defined but never used.","'setData' is assigned a value but never used.","'Text' is defined but never used.","Array.prototype.some() expects a return value from arrow function.","ReturnStatement","expectedReturnValue","'shortid' is defined but never used.","'ChangeEvent' is defined but never used.","'Select' is defined but never used.","React Hook useEffect has missing dependencies: 'data.branchs', 'data.desc', 'data.startDate', and 'data.times'. Either include them or remove the dependency array.",["353"],"'title' is assigned a value but never used.","strict","'use strict' is unnecessary inside of modules.","ExpressionStatement","module",{"range":"354","text":"355"},"'Prism' is defined but never used.","'css' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"356","fix":"357"},{"desc":"358","fix":"359"},{"desc":"360","fix":"361"},{"desc":"362","fix":"363"},[0,13],"","Update the dependencies array to be: [activeFile, activeFileId, openClickedFile]",{"range":"364","text":"365"},"Update the dependencies array to be: [targetKeyCode]",{"range":"366","text":"367"},"Update the dependencies array to be: [menus, targetClass]",{"range":"368","text":"369"},"Update the dependencies array to be: [activeFile.id, activeFile.isLoaded, data.branchs, data.desc, data.startDate, data.times]",{"range":"370","text":"371"},[3154,3156],"[activeFile, activeFileId, openClickedFile]",[686,688],"[targetKeyCode]",[1045,1054],"[menus, targetClass]",[1165,1201],"[activeFile.id, activeFile.isLoaded, data.branchs, data.desc, data.startDate, data.times]"]